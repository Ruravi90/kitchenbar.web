import{a as K,b as J,n as L}from"./chunk-6LEEJJLL.js";import"./chunk-VO7G42AR.js";import{a as H,g as z,o as G}from"./chunk-3YGTL4GC.js";import{b as R,c as q}from"./chunk-7FN5CSOE.js";import{t as B,w as A}from"./chunk-3QL3IMAU.js";import"./chunk-4YRY4IP2.js";import{e as w,g as D,l as $}from"./chunk-AXTF557K.js";import{D as O,H as k,Ha as b,I as y,Ia as f,Ja as h,Ka as V,Lb as E,O as p,Oa as M,P as _,Qa as T,Ra as j,aa as n,ba as x,g as I,ja as d,la as l,na as S,ob as F,pa as s,pb as P,qa as o,qb as N,ra as u,va as C,wa as g,xa as m}from"./chunk-RICBQGXD.js";var Y=()=>({width:"100%"}),Z=()=>({width:"450px"}),ee=t=>({"border-top-1 surface-border":t});function te(t,a){t&1&&u(0,"img",23)}function ie(t,a){t&1&&u(0,"img",24)}function ne(t,a){if(t&1){let e=C();s(0,"div",18)(1,"p-button",25),g("onClick",function(r){p(e);let c=m().$implicit,v=m(2),X=b(10);return _(v.toggleComents(r,X,c))}),o()()}t&2&&(n(),l("rounded",!0)("raised",!0))}function re(t,a){t&1&&u(0,"img",28)}function oe(t,a){if(t&1){let e=C();s(0,"div",18)(1,"p-button",26),g("onClick",function(r){p(e);let c=m().$implicit,v=m(2);return _(v.changeStatusOrder(r,c,2))}),d(2,re,1,0,"ng-template",27),o()()}t&2&&(n(),l("rounded",!0)("raised",!0))}function se(t,a){t&1&&u(0,"img",30)}function ae(t,a){if(t&1){let e=C();s(0,"div",18)(1,"p-button",29),g("onClick",function(r){p(e);let c=m().$implicit,v=m(2);return _(v.changeStatusOrder(r,c,3))}),d(2,se,1,0,"ng-template",27),o()()}if(t&2){let e=m().$implicit;n(),l("disabled",e.statusOrderId===1)("rounded",!0)("raised",!0)}}function le(t,a){if(t&1&&(s(0,"div",13)(1,"div",14)(2,"div",15),d(3,te,1,0,"img",16)(4,ie,1,0,"img",17),o(),s(5,"div",18)(6,"div",19),f(7),o()(),s(8,"div",20)(9,"div",21),f(10),o()(),d(11,ne,2,2,"div",22)(12,oe,3,2,"div",22)(13,ae,3,3,"div",22),o()()),t&2){let e=a.$implicit,i=a.first;n(),l("ngClass",j(8,ee,!i)),n(2),l("ngIf",e.statusOrderId==1&&!e.isCancel),n(),l("ngIf",e.statusOrderId==2&&!e.isCancel),n(3),h(e.table==null?null:e.table.name),n(3),h(e.quantity+" "+(e.meal==null?null:e.meal.name)),n(),l("ngIf",e.aditional!=null),n(),l("ngIf",e.statusOrderId==1),n(),l("ngIf",e.statusOrderId==2)}}function me(t,a){if(t&1&&(s(0,"div",11),d(1,le,14,10,"div",12),o()),t&2){let e=a.$implicit;n(),l("ngForOf",e)}}function ce(t,a){if(t&1){let e=C();s(0,"div",31)(1,"div",32),u(2,"i",33),o(),s(3,"span",34),f(4),o(),s(5,"p",35),f(6),o(),s(7,"div",36)(8,"button",37),g("click",function(){p(e),m();let r=b(7);return _(r.accept())}),o(),s(9,"button",38),g("click",function(){p(e),m();let r=b(7);return _(r.reject())}),o()()()}if(t&2){let e=a.$implicit;n(4),V(" ",e.header," "),n(2),h(e.message)}}function de(t,a){if(t&1&&(s(0,"div",19),f(1),o()),t&2){let e=m();n(),h(e.coments)}}var U=(()=>{class t{constructor(e,i,r,c){this.confirmationService=e,this.messageService=i,this._serviceOrder=r,this.hub=c}ngOnInit(){return I(this,null,function*(){this.retrieveOrders(),this.hub.receiveOrderToKitchen().subscribe(e=>{this.retrieveOrders()})})}delay(e){return I(this,null,function*(){return new Promise(i=>setTimeout(i,e))})}retrieveOrders(){this._serviceOrder.getItemsAllPerDay().subscribe({next:e=>{this.items=e.filter(i=>i.isCancel==!1&&(i.statusOrderId==1||i.statusOrderId==2))},error:e=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:e.error.messages})}})}changeStatusOrder(e,i,r){this.confirmationService.confirm({target:e.target,message:"",header:r==2?"Se inicio con la preparacion?":"Se envio el alimento?",accept:()=>{i.statusOrderId=r,this._serviceOrder.updateItem(i.id,i).subscribe({next:c=>{this.hub.sendOrder(i)},error:c=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:c.error.messages})}})}})}toggleComents(e,i,r){this.coments=r.aditional,i.toggle(e)}static{this.\u0275fac=function(i){return new(i||t)(x(w),x(D),x(B),x(A))}}static{this.\u0275cmp=k({type:t,selectors:[["app-tables"]],features:[M([w])],decls:12,vars:10,consts:[["dv",""],["cd",""],["op",""],[1,"flex","flex-wrap","justify-content-center"],[1,"w-full"],["header","Ordenes"],["emptyMessage","Sin ordenes en proceso",3,"value","rows","paginator"],["pTemplate","list"],["pTemplate","headless"],[3,"showCloseIcon"],["pTemplate","content"],[1,"grid","grid-nogutter"],["class","col-12 pb-2",4,"ngFor","ngForOf"],[1,"col-12","pb-2"],[1,"grid",3,"ngClass"],[1,"col-fixed"],["pTooltip","En proceso","alt","En proceso","src","./assets/images/icon/process.svg","style","width: 25px;",4,"ngIf"],["pTooltip","Preparando","alt","Preparando","src","./assets/images/icon/uniform.svg","style","width: 25px;",4,"ngIf"],[1,"col-fixed","gap-1"],[1,"font-medium","text-700","mt-2"],[1,"col","gap-2"],[1,"text-lg","font-medium","text-900","mt-2"],["class","col-fixed gap-1",4,"ngIf"],["pTooltip","En proceso","alt","En proceso","src","./assets/images/icon/process.svg",2,"width","25px"],["pTooltip","Preparando","alt","Preparando","src","./assets/images/icon/uniform.svg",2,"width","25px"],["severity","secondary","icon","pi pi-comment",3,"onClick","rounded","raised"],["pTooltip","Preparando","severity","warning","icon","./assets/images/icon/process.svg",3,"onClick","rounded","raised"],["pTemplate","buttonicon"],["src","./assets/images/icon/uniform.svg",2,"width","60%"],["pTooltip","Enviado","severity","help","icon","./assets/images/icon/delivery.svg",3,"onClick","disabled","rounded","raised"],["src","./assets/images/icon/delivery.svg",2,"width","60%"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(i,r){i&1&&(s(0,"div",3)(1,"div",4)(2,"p-card",5)(3,"p-dataView",6,0),d(5,me,2,1,"ng-template",7),o()()()(),s(6,"p-confirmDialog",null,1),d(8,ce,10,2,"ng-template",8),o(),s(9,"p-overlayPanel",9,2),d(11,de,2,1,"ng-template",10),o()),i&2&&(n(2),S(T(8,Y)),n(),l("value",r.items)("rows",10)("paginator",!0),n(6),S(T(9,Z)),l("showCloseIcon",!0))},dependencies:[F,P,N,R,q,$,H,K,G,J,z]})}}return t})();var W=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=O({imports:[E.forChild([{path:"",component:U}]),E]})}}return t})();var Me=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=O({imports:[W,L]})}}return t})();export{Me as OrdersModule};
