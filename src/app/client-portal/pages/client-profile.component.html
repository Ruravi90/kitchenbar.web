<div class="profile-container">
    <app-client-navigation></app-client-navigation>
    <header class="profile-header glass-effect">
        <h1>Mi Perfil</h1>
        <button class="btn btn-outline-danger" (click)="logout()">Cerrar Sesi贸n</button>
    </header>

    <div class="content-grid">
        <!-- User Info -->
        <div class="card user-card">
            <div class="avatar-placeholder">
                {{ user?.name?.charAt(0) || 'U' }}
            </div>
            <h2>{{ user?.name }}</h2>
            <p class="email">{{ user?.email }}</p>
            <p class="phone" *ngIf="user?.phoneNumber">{{ user?.phoneNumber }}</p>
        </div>

        <!-- Addresses -->
        <div class="card address-card">
            <div class="card-title-row">
                <h3>Direcciones Guardadas</h3>
                <button class="btn btn-sm btn-primary" (click)="toggleAddressForm()" *ngIf="!showAddressForm">
                    + Agregar Nueva
                </button>
            </div>

            <!-- Add Address Form -->
            <div class="add-address-form" *ngIf="showAddressForm">
                <h4>Nueva Direcci贸n</h4>
                <form [formGroup]="addressForm" (ngSubmit)="onAddAddress()">
                    <div class="form-row">
                        <div class="form-group half">
                             <label>Etiqueta (ej: Casa)</label>
                             <input formControlName="tagName" class="form-control" placeholder="Casa">
                        </div>
                        <div class="form-group half">
                            <label>C贸digo Postal</label>
                            <input formControlName="zipCode" class="form-control" placeholder="12345">
                       </div>
                    </div>
                    <div class="form-group">
                        <label>Direcci贸n</label>
                        <textarea formControlName="address" class="form-control" rows="2" placeholder="Calle, N煤mero, Depto..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Instrucciones de Entrega</label>
                        <input formControlName="instructions" class="form-control" placeholder="C贸digo de port贸n, cerca del parque...">
                    </div>
                    <div class="form-actions right">
                        <button type="button" class="btn btn-text" (click)="cancelAddress()">Cancelar</button>
                        <button type="submit" class="btn btn-primary" [disabled]="addressForm.invalid || loading">Guardar</button>
                    </div>
                </form>
            </div>

            <!-- List -->
            <div class="address-list" *ngIf="!showAddressForm">
                <div class="empty-state" *ngIf="addresses.length === 0">
                    No hay direcciones guardadas a煤n.
                </div>
                <div class="address-item" *ngFor="let addr of addresses">
                    <div class="address-icon"></div>
                    <div class="address-details">
                        <span class="tag">{{ addr.tagName }}</span>
                        <p>{{ addr.address }}</p>
                        <small *ngIf="addr.instructions">Nota: {{ addr.instructions }}</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
