import{a as z}from"./chunk-UUS4ZWI4.js";import{c as G}from"./chunk-72P54MKW.js";import{b as Z,c as $,e as ee,f as te,g as ie,h as re,k as ne,l as ae}from"./chunk-6MCH4QGB.js";import"./chunk-BQVHG75P.js";import{a as Y,g as J,n as X}from"./chunk-OSNXDCNO.js";import"./chunk-QFKRZ7EC.js";import{b as U,c as H}from"./chunk-GQ2UZOTQ.js";import{b as W,d as Q,g as A,n as O,t as K}from"./chunk-5C42LTVV.js";import"./chunk-4YRY4IP2.js";import{e as j,g as P,l as F}from"./chunk-IDCO3KAE.js";import{$a as N,Aa as v,Ba as w,C as s,D as m,Ea as R,Fa as L,P as d,Q as C,Y as S,_ as u,_a as B,ba as q,da as n,ea as o,fa as f,ja as x,ka as c,la as _,pa as k,t as y,va as M,vb as E,wa as b,x as V,xa as D,y as T,ya as I,za as h}from"./chunk-LVDDLAXI.js";var me=()=>({width:"100%"}),pe=a=>({"border-top-1 surface-border":a});function de(a,g){if(a&1){let t=x();n(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30),b(4),o()(),n(5,"div",31)(6,"p-button",32),c("click",function(){let e=s(t).$implicit,l=_(2);return m(l.showQRModal(e))}),o()(),n(7,"div",31)(8,"p-button",33),c("click",function(){let e=s(t).$implicit,l=_(2);return m(l.showModal(!0,e))}),o()(),n(9,"div",31)(10,"p-button",34),c("click",function(){let e=s(t).$implicit,l=_(2);return m(l.confirmDeleted(e))}),o()()()()}if(a&2){let t=g.$implicit,i=g.first;d(),u("ngClass",L(2,pe,!i)),d(3),D(t.name)}}function ce(a,g){if(a&1&&(n(0,"div",25),S(1,de,11,4,"div",26),o()),a&2){let t=g.$implicit;d(),u("ngForOf",t)}}function ue(a,g){if(a&1){let t=x();n(0,"div",35)(1,"div",36),f(2,"i",37),o(),n(3,"span",38),b(4),o(),n(5,"p",39),b(6),o(),n(7,"div",40)(8,"button",41),c("click",function(){s(t),_();let e=M(28);return m(e.accept())}),o(),n(9,"button",42),c("click",function(){s(t),_();let e=M(28);return m(e.reject())}),o()()()}if(a&2){let t=g.$implicit;d(4),I(" ",t.header," "),d(2),D(t.message)}}var le=(()=>{class a{constructor(t,i,e){this.confirmationService=t,this.messageService=i,this.tablesServices=e,this.tables=[],this.table={},this.visibleModal=!1,this.visibleQRModal=!1,this.isEdit=!1,this.qrData={allowEmptyString:!0,alt:"A custom alt attribute",ariaLabel:"QR Code image with the following content...",colorDark:"#000000ff",colorLight:"#ffffffff",cssClass:"center",elementType:"canvas",errorCorrectionLevel:"M",imageSrc:"./assets/layout/images/logo-dark.svg",imageHeight:75,imageWidth:150,margin:4,qrdata:"",scale:1,version:void 0,title:"A custom title attribute",width:300},this.elementType="canvas"}ngOnInit(){this.getTables()}getTables(){this.tablesServices.getItemsByInstance().subscribe({next:t=>{this.tables=t},error:t=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:t.error.messages})}})}showModal(t=!1,i){this.isEdit=t,t?this.table=i:this.table=new G,this.visibleModal=!0}confirmSave(){this.isEdit?this.tablesServices.updateItem(this.table.id,this.table).subscribe({next:t=>this.getTables(),error:t=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:t.error.messages})}}):this.tablesServices.createItem(this.table).subscribe({next:t=>this.getTables(),error:t=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:t.error.messages})}}),this.visibleModal=!1}confirmDeleted(t){this.confirmationService.confirm({header:"Estas seguro de eliminar?",message:"Por favor de confirmar.",accept:()=>{this.tablesServices.deleteItem(t.id).subscribe({next:i=>this.getTables(),error:i=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:i.error.messages})}})}})}showQRModal(t){this.visibleQRModal=!0,this.table=t,this.qrData.qrdata=z.baseUrl+t.identity}saveQRAsImage(t){let i=null;if(this.elementType==="canvas"?i=t.qrcElement.nativeElement.querySelector("canvas").toDataURL("image/png"):this.elementType==="img"||this.elementType==="url"?i=t.qrcElement.nativeElement.querySelector("img").src:alert("Set elementType to 'canvas', 'img' or 'url'."),i){let e=this.convertBase64ToBlob(i),l=new Blob([e],{type:"image/png"}),p=window.URL.createObjectURL(l),r=document.createElement("a");r.href=p,r.download="angularx-qrcode",r.click()}this.visibleQRModal=!1}convertBase64ToBlob(t){let i=t.split(";base64,"),e=i[0].split(":")[1],l=window.atob(i[1]),p=new Uint8Array(l.length);for(let r=0;r<l.length;++r)p[r]=l.charCodeAt(r);return new Blob([p],{type:e})}static{this.\u0275fac=function(i){return new(i||a)(C(j),C(P),C(O))}}static{this.\u0275cmp=V({type:a,selectors:[["app-tables"]],decls:37,vars:33,consts:[["dv",""],["cd",""],["parent",""],[1,"flex","flex-wrap","justify-content-center"],[1,"w-full"],["header","Mesas",1,""],[1,"w-full","mb-4"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar"],["type","button","pButton","","icon","pi pi-plus","size","small","pTooltip","Nueva mesa",1,"p-button-success",3,"click"],["emptyMessage","Sin mesas registradas",3,"value","rows","paginator"],["pTemplate","list"],[3,"visibleChange","header","modal","visible"],[1,"formgrid","grid","gap-3","mb-3","mt-3"],[1,"field","col-12"],["for","tableName"],["id","tableName","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full",3,"ngModelChange","ngModel"],["for","Description"],["id","Description","rows","2","cols","30","pInputTextarea","","placeholder","Descripcion",3,"ngModelChange","autoResize","ngModel"],[1,"flex","justify-content-end","gap-2"],["label","Cancelar","severity","secondary",3,"click"],["label","Guardar",3,"click"],["pTemplate","headless"],[3,"elementType","errorCorrectionLevel","qrdata","scale","width","allowEmptyString","className","colorDark","colorLight","margin","alt","ariaLabel","title","imageSrc","imageHeight","imageWidth"],["icon","pi pi-cloud-download","label","Descargar",3,"click"],[1,"grid","grid-nogutter"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"grid","p-2",3,"ngClass"],[1,"col"],[1,"overflow-hidden","text-overflow-ellipsis","text-md","font-medium","text-900","mt-2",2,"width","100px"],[1,"col-fixed","gap-1"],["icon","pi pi-qrcode","severity","secondary","size","small","pTooltip","Descargar QR",3,"click"],["icon","pi pi-pencil","size","small","pTooltip","Editar",3,"click"],["severity","danger","icon","pi pi-trash","size","small","pTooltip","Eliminar",3,"click"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(i,e){if(i&1){let l=x();n(0,"div",3)(1,"div",4)(2,"p-card",5)(3,"div")(4,"p-inputGroup",6)(5,"p-inputGroupAddon"),f(6,"i",7),o(),f(7,"input",8),n(8,"button",9),c("click",function(){return s(l),m(e.showModal())}),o()(),n(9,"p-dataView",10,0),S(11,ce,2,1,"ng-template",11),o()()()()(),n(12,"p-dialog",12),w("visibleChange",function(r){return s(l),v(e.visibleModal,r)||(e.visibleModal=r),m(r)}),n(13,"div",13)(14,"div",14)(15,"label",15),b(16,"Nombre de mesa"),o(),n(17,"input",16),w("ngModelChange",function(r){return s(l),v(e.table.name,r)||(e.table.name=r),m(r)}),o()(),n(18,"div",14)(19,"label",17),b(20,"Descripcion"),o(),n(21,"textarea",18),w("ngModelChange",function(r){return s(l),v(e.table.additional,r)||(e.table.additional=r),m(r)}),b(22,"            "),o()()(),n(23,"div",19)(24,"p-button",20),c("click",function(){return s(l),m(e.visibleModal=!1)}),o(),n(25,"p-button",21),c("click",function(){return s(l),m(e.confirmSave())}),o()()(),f(26,"p-toast"),n(27,"p-confirmDialog",null,1),S(29,ue,10,2,"ng-template",22),o(),n(30,"p-dialog",12),w("visibleChange",function(r){return s(l),v(e.visibleQRModal,r)||(e.visibleQRModal=r),m(r)}),n(31,"div",13),f(32,"qrcode",23,2),o(),n(34,"div",19)(35,"p-button",20),c("click",function(){return s(l),m(e.visibleQRModal=!1)}),o(),n(36,"p-button",24),c("click",function(){s(l);let r=M(33);return m(e.saveQRAsImage(r))}),o()()()}i&2&&(d(9),u("value",e.tables)("rows",5)("paginator",!0),d(3),k("header","",e.isEdit?"Editar":"Nueva"," mesa"),u("modal",!0),h("visible",e.visibleModal),d(5),h("ngModel",e.table.name),d(4),q(R(32,me)),u("autoResize",!0),h("ngModel",e.table.additional),d(9),k("header","QR de mesa ",e.table.name,""),u("modal",!0),h("visible",e.visibleQRModal),d(2),u("elementType",e.elementType)("errorCorrectionLevel",e.qrData.errorCorrectionLevel)("qrdata",e.qrData.qrdata)("scale",e.qrData.scale)("width",e.qrData.width)("allowEmptyString",!0)("className",e.qrData.cssClass)("colorDark",e.qrData.colorDark)("colorLight",e.qrData.colorLight)("margin",e.qrData.margin)("alt",e.qrData.alt)("ariaLabel",e.qrData.ariaLabel)("title",e.qrData.title)("imageSrc",e.qrData.imageSrc)("imageHeight",e.qrData.imageHeight)("imageWidth",e.qrData.imageWidth))},dependencies:[B,N,U,H,F,K,W,Q,A,Y,$,X,ee,te,Z,re,ie,J,ne],styles:[".button-table[_ngcontent-%COMP%]{appearance:none;background-color:#fcfcfd;border-radius:4px;border-width:0;box-shadow:#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;box-sizing:border-box;color:#36395a;cursor:pointer;font-family:JetBrains Mono,monospace;height:35vh;width:30vw;list-style:none;overflow:hidden;padding-left:16px;padding-right:16px;position:relative;text-decoration:none;transition:box-shadow .15s,transform .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;will-change:box-shadow,transform;font-size:18px}.button-table[_ngcontent-%COMP%]:focus{box-shadow:#d6d6e7 0 0 0 1.5px inset,#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset}.button-table[_ngcontent-%COMP%]:hover{box-shadow:#2d234266 0 4px 8px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;transform:translateY(-2px)}.button-table[_ngcontent-%COMP%]:active{box-shadow:#d6d6e7 0 3px 7px inset;transform:translateY(2px)}"]})}}return a})();var se=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=T({type:a})}static{this.\u0275inj=y({imports:[E.forChild([{path:"",component:le}]),E]})}}return a})();var je=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=T({type:a})}static{this.\u0275inj=y({imports:[se,ae]})}}return a})();export{je as TablesModule};
