import{b as T}from"./chunk-M4WXGWUD.js";import{b as ee,e as te,f as ie,g as re,h as ne,n as oe}from"./chunk-UDJT4UBT.js";import"./chunk-AWAOCW7O.js";import{a as U,g as X,k as Y,o as $}from"./chunk-2NNC7HIZ.js";import{b as K,c as Q}from"./chunk-4R5SEBV5.js";import{A as Z,b as G,e as L,i as O,r as H,s as J}from"./chunk-AJDIPJM2.js";import"./chunk-4YRY4IP2.js";import{e as z,g as R,l as q}from"./chunk-G5ZMLV54.js";import{$ as _,D as y,Fa as E,Ga as p,H as N,Ha as V,I as C,Ia as W,Ja as b,Jb as I,Ka as M,La as w,N as s,O as m,Oa as D,Pa as A,_ as c,g as k,ha as S,ja as f,la as j,mb as F,na as n,nb as P,oa as o,pa as h,ta as x,ua as d,va as v,za as B}from"./chunk-77SOYJAE.js";var me=()=>({width:"100%"}),ce=i=>({"border-top-1 surface-border":i});function de(i,u){if(i&1){let e=x();n(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),p(4),o()(),n(5,"div",28)(6,"p-button",29),d("click",function(){let t=s(e).$implicit,l=v(2);return m(l.showModal(!0,t))}),o()(),n(7,"div",28)(8,"p-button",30),d("click",function(){let t=s(e).$implicit,l=v(2);return m(l.confirmDeleted(t))}),o()()()()}if(i&2){let e=u.$implicit,r=u.first;c(),f("ngClass",A(2,ce,!r)),c(3),V(e.name)}}function pe(i,u){if(i&1&&(n(0,"div",22),S(1,de,9,4,"div",23),o()),i&2){let e=u.$implicit;c(),f("ngForOf",e)}}function ue(i,u){if(i&1){let e=x();n(0,"div",31)(1,"div",32),h(2,"i",33),o(),n(3,"span",34),p(4),o(),n(5,"p",35),p(6),o(),n(7,"div",36)(8,"button",37),d("click",function(){s(e),v();let t=E(31);return m(t.accept())}),o(),n(9,"button",38),d("click",function(){s(e),v();let t=E(31);return m(t.reject())}),o()()()}if(i&2){let e=u.$implicit;c(4),W(" ",e.header," "),c(2),V(e.message)}}var le=(()=>{class i{constructor(e,r,t,l){this.confirmationService=e,this.messageService=r,this.iMeal=t,this.categoriesServices=l,this.items=[],this.meal=new T,this.visibleModal=!1,this.isEdit=!1,this.categories=[]}ngOnInit(){this.getMeals(),this.getCategories()}delay(e){return k(this,null,function*(){return new Promise(r=>setTimeout(r,e))})}getMeals(){this.iMeal.getItemsByInstance().subscribe({next:e=>{this.items=e},error:e=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:e.error.messages})}})}getCategories(){this.categoriesServices.getItemsByInstance().subscribe({next:e=>{this.categories=e},error:e=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:e.error.messages})}})}showModal(e=!1,r){console.log(r),this.isEdit=e,e?(this.meal=r,this.selectedCategory=this.categories.find(t=>t.id==r?.categoryId)):this.meal=new T,this.visibleModal=!0}confirmSave(){this.meal.categoryId=this.selectedCategory.id,this.isEdit?this.iMeal.updateItem(this.meal.id,this.meal).subscribe({next:e=>this.getMeals(),error:e=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:e.error.messages})}}):this.iMeal.createItem(this.meal).subscribe({next:e=>this.getMeals(),error:e=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:e.error.messages})}}),this.selectedCategory=null,this.visibleModal=!1}confirmDeleted(e){this.confirmationService.confirm({header:"Estas seguro de eliminar?",message:"Por favor de confirmar.",accept:()=>{this.iMeal.deleteItem(this.meal.id).subscribe({next:r=>this.getMeals(),error:r=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:r.error.messages})}})}})}static{this.\u0275fac=function(r){return new(r||i)(_(z),_(R),_(J),_(H))}}static{this.\u0275cmp=N({type:i,selectors:[["app-meals"]],decls:33,vars:14,consts:[["dv",""],["cd",""],[1,"flex","flex-wrap","justify-content-center"],[1,"w-full"],["header","Alimentos",1,""],[1,"w-full","mb-4"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar"],["type","button","pButton","","icon","pi pi-plus","size","small","pTooltip","Nuevo alimento/bebida",1,"p-button-success",3,"click"],["emptyMessage","Alimentos no registrados",3,"value","rows","paginator"],["pTemplate","list"],[3,"visibleChange","header","modal","visible"],[1,"formgrid","grid","gap-3","mb-3","mt-3"],[1,"field","col-12"],["for","category"],["id","category","optionLabel","name","placeholder","Selecciona la categoria",3,"ngModelChange","options","ngModel"],["for","tableName"],["id","tableName","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full",3,"ngModelChange","ngModel"],[1,"flex","justify-content-end","gap-2"],["label","Cancelar","severity","secondary",3,"click"],["label","Guardar",3,"click"],["pTemplate","headless"],[1,"grid","grid-nogutter"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"grid","p-2",3,"ngClass"],[1,"col"],[1,"overflow-hidden","text-overflow-ellipsis","text-lg","font-medium","text-900","mt-2",2,"width","100px"],[1,"col-fixed","gap-1"],["icon","pi pi-pencil","size","small","pTooltip","Editar",3,"click"],["severity","danger","icon","pi pi-trash","size","small","pTooltip","Eliminar",3,"click"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(r,t){if(r&1){let l=x();n(0,"div",2)(1,"div",3)(2,"p-card",4)(3,"div")(4,"p-inputGroup",5)(5,"p-inputGroupAddon"),h(6,"i",6),o(),h(7,"input",7),n(8,"button",8),d("click",function(){return s(l),m(t.showModal())}),o()(),n(9,"p-dataView",9,0),S(11,pe,2,1,"ng-template",10),o()()()()(),n(12,"p-dialog",11),w("visibleChange",function(a){return s(l),M(t.visibleModal,a)||(t.visibleModal=a),m(a)}),n(13,"div",12)(14,"div",13)(15,"label",14),p(16,"Categoria"),o(),n(17,"p-dropdown",15),w("ngModelChange",function(a){return s(l),M(t.selectedCategory,a)||(t.selectedCategory=a),m(a)}),o()(),n(18,"div",13)(19,"label",16),p(20,"Nombre de alimento / bebida"),o(),n(21,"input",17),w("ngModelChange",function(a){return s(l),M(t.meal.name,a)||(t.meal.name=a),m(a)}),o()(),n(22,"div",13)(23,"label",16),p(24,"Precio"),o(),n(25,"input",17),w("ngModelChange",function(a){return s(l),M(t.meal.price,a)||(t.meal.price=a),m(a)}),o()()(),n(26,"div",18)(27,"p-button",19),d("click",function(){return s(l),m(t.visibleModal=!1)}),o(),n(28,"p-button",20),d("click",function(){return s(l),m(t.confirmSave())}),o()()(),h(29,"p-toast"),n(30,"p-confirmDialog",null,1),S(32,ue,10,2,"ng-template",21),o()}r&2&&(c(9),f("value",t.items)("rows",5)("paginator",!0),c(3),B("header","",t.isEdit?"Editar":"Nuevo"," alimento/bebida"),f("modal",!0),b("visible",t.visibleModal),c(5),j(D(13,me)),f("options",t.categories),b("ngModel",t.selectedCategory),c(4),b("ngModel",t.meal.name),c(4),b("ngModel",t.meal.price))},dependencies:[F,P,K,Q,q,Z,G,L,O,U,$,te,ie,ee,ne,re,X,Y]})}}return i})();var se=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=C({type:i})}static{this.\u0275inj=y({imports:[I.forChild([{path:"",component:le}]),I]})}}return i})();var Ge=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=C({type:i})}static{this.\u0275inj=y({imports:[se,oe]})}}return i})();export{Ge as MealsModule};
