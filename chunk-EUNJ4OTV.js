import{d as T}from"./chunk-64WP64BE.js";import{b as $,e as te,f as ie,g as ne,h as re,j as se}from"./chunk-RUSD7P4Y.js";import{b as oe}from"./chunk-J6VSZILJ.js";import{a as H,g as K,j as Q,n as Z}from"./chunk-4JEEGTY5.js";import{d as ee}from"./chunk-4HF4CYB4.js";import{b as q,c as J}from"./chunk-BJ7UQRZ4.js";import{b as j,d as A,g as L,j as z,o as Y,s as X}from"./chunk-BFCD6XJQ.js";import"./chunk-4YRY4IP2.js";import{e as O,l as G}from"./chunk-JY4AAIVW.js";import{$ as V,A as a,B as l,Ca as E,Da as N,N as p,O as M,W as v,Y as _,Ya as P,Za as R,ba as i,ca as r,da as g,ha as S,ia as c,ja as x,na as D,r as C,sb as I,ta as k,ua as d,v as B,va as U,w as y,wa as F,xa as h,ya as w,za as b}from"./chunk-VUSRYWWQ.js";var W=()=>({width:"100%"}),me=n=>({"border-top-1 surface-border":n});function de(n,u){n&1&&g(0,"img",27)}function ce(n,u){if(n&1){let t=S();i(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33),d(4),r()(),i(5,"div",34)(6,"p-button",35),c("click",function(){let e=a(t).$implicit,m=x(2);return l(m.showModal(!0,e))}),r()(),i(7,"div",34)(8,"p-button",36),c("click",function(){let e=a(t).$implicit,m=x(2);return l(m.confirmDeleted(e))}),r()()()()}if(n&2){let t=u.$implicit,o=u.first;p(),_("ngClass",N(2,me,!o)),p(3),U(t.name)}}function ue(n,u){if(n&1&&(i(0,"div",28),v(1,ce,9,4,"div",29),r()),n&2){let t=u.$implicit;p(),_("ngForOf",t)}}function fe(n,u){if(n&1){let t=S();i(0,"div",37)(1,"div",38),g(2,"i",39),r(),i(3,"span",40),d(4),r(),i(5,"p",41),d(6),r(),i(7,"div",42)(8,"button",43),c("click",function(){a(t),x();let e=k(40);return l(e.accept())}),r(),i(9,"button",44),c("click",function(){a(t),x();let e=k(40);return l(e.reject())}),r()()()}if(n&2){let t=u.$implicit;p(4),F(" ",t.header," "),p(2),U(t.message)}}var le=(()=>{class n{constructor(t,o,e){this.confirmationService=t,this._serviceAuth=o,this.usersServices=e,this.items=[],this.user=new T,this.current=new T,this.visibleModal=!1,this.isEdit=!1,this.roles=[{id:1,name:"Admin"},{id:2,name:"Mesero"}]}ngOnInit(){this.getUsers(),this.current=this._serviceAuth.getCurrentUser()}getUsers(){this.usersServices.getItemsByInstance().subscribe({next:t=>{this.items=t},error:t=>console.error(t)})}showModal(t=!1,o){t?(this.user=o,this.user.user_name=o?.user_name?.split("@")[0],this.selectedRol=this.roles.find(e=>e.id==o?.role),console.log(this.selectedRol)):this.user=new T,this.isEdit=t,this.visibleModal=!0}confirmSave(){this.user.user_name=this.user.user_name+"@"+this.current.instance.name_kitchen.toLowerCase(),this.user.role=this.selectedRol.id,this.isEdit?this.usersServices.updateItem(this.user.id,this.user).subscribe({next:t=>this.getUsers(),error:t=>console.error(t)}):this.usersServices.createItem(this.user).subscribe({next:t=>this.getUsers(),error:t=>console.error(t)}),this.selectedRol=null,this.visibleModal=!1}confirmDeleted(t){this.confirmationService.confirm({header:"Estas seguro de eliminar?",message:"Por favor de confirmar.",accept:()=>{this.usersServices.deleteItem(this.user.id).subscribe({next:o=>this.getUsers(),error:o=>console.error(o)})}})}static{this.\u0275fac=function(o){return new(o||n)(M(O),M(z),M(Y))}}static{this.\u0275cmp=B({type:n,selectors:[["app-tables"]],decls:42,vars:22,consts:[["dv",""],["password","ngModel"],["cd",""],["header","Usuarios",1,""],["pTemplate","header"],[1,"w-full"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar"],["type","button","pButton","","icon","pi pi-plus","size","small","pTooltip","Nuevo usuario",1,"p-button-success",3,"click"],["emptyMessage","Usuarios no registrados",3,"value","rows","paginator"],["pTemplate","list"],[3,"visibleChange","header","modal","visible"],[1,"formgrid","grid","gap-3","mb-3","mt-3"],[1,"field","col-12"],["for","name"],["pInputText","","id","name","type","text",1,"w-full",3,"ngModelChange","ngModel"],["for","role"],["id","role","optionLabel","name","placeholder","Selecciona el Rol",3,"ngModelChange","options","ngModel"],["pTooltip","usuario@nombre-bar",1,"field","col-12"],["for","user_name"],["id","user_name","type","text","pInputText","",3,"ngModelChange","ngModel"],["for","password"],["id","password","name","password",3,"ngModelChange","ngModel","inputStyle","toggleMask"],[1,"flex","justify-content-end","gap-2"],["label","Cancelar","severity","secondary",3,"click"],["label","Guardar",3,"click"],["pTemplate","headless"],["alt","Card","src","../../../../assets/layout/images/restaurante.webp",2,"max-height","15vh","object-fit","cover"],[1,"grid","grid-nogutter"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"grid","p-2",3,"ngClass"],[1,"col"],[1,"overflow-hidden","text-overflow-ellipsis","text-lg","font-medium","text-900","mt-2",2,"width","100px"],[1,"col-fixed","gap-1"],["icon","pi pi-pencil","size","small","pTooltip","Editar",3,"click"],["severity","danger","icon","pi pi-trash","size","small","pTooltip","Eliminar",3,"click"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(o,e){if(o&1){let m=S();i(0,"p-card",3),v(1,de,1,0,"ng-template",4),i(2,"div")(3,"p-inputGroup",5)(4,"p-inputGroupAddon"),g(5,"i",6),r(),g(6,"input",7),i(7,"button",8),c("click",function(){return a(m),l(e.showModal())}),r()(),i(8,"p-dataView",9,0),v(10,ue,2,1,"ng-template",10),r()()(),i(11,"p-dialog",11),b("visibleChange",function(s){return a(m),w(e.visibleModal,s)||(e.visibleModal=s),l(s)}),i(12,"div",12)(13,"div",13)(14,"label",14),d(15,"Nombre del usuario"),r(),i(16,"input",15),b("ngModelChange",function(s){return a(m),w(e.user.name,s)||(e.user.name=s),l(s)}),r()(),i(17,"div",13),g(18,"p-divider"),r(),i(19,"div",13)(20,"label",16),d(21,"Rol"),r(),i(22,"p-dropdown",17),b("ngModelChange",function(s){return a(m),w(e.selectedRol,s)||(e.selectedRol=s),l(s)}),r()(),i(23,"div",18)(24,"label",19),d(25,"Usuario"),r(),i(26,"p-inputGroup")(27,"input",20),b("ngModelChange",function(s){return a(m),w(e.user.user_name,s)||(e.user.user_name=s),l(s)}),r(),i(28,"p-inputGroupAddon"),d(29),r()()(),i(30,"div",13)(31,"label",21),d(32,"Contrase\xF1a"),r(),i(33,"p-password",22,1),b("ngModelChange",function(s){return a(m),w(e.user.password,s)||(e.user.password=s),l(s)}),r()()(),i(35,"div",23)(36,"p-button",24),c("click",function(){return a(m),l(e.visibleModal=!1)}),r(),i(37,"p-button",25),c("click",function(){return a(m),l(e.confirmSave())}),r()()(),g(38,"p-toast"),i(39,"p-confirmDialog",null,2),v(41,fe,10,2,"ng-template",26),r()}o&2&&(p(8),_("value",e.items)("rows",5)("paginator",!0),p(3),D("header","",e.isEdit?"Editar":"Nuevo"," usuario"),_("modal",!0),h("visible",e.visibleModal),p(5),h("ngModel",e.user.name),p(6),V(E(19,W)),_("options",e.roles),h("ngModel",e.selectedRol),p(5),h("ngModel",e.user.user_name),p(2),U("@"+e.current.instance.name_kitchen.toLowerCase()),p(4),V(E(20,W)),h("ngModel",e.user.password),_("inputStyle",E(21,W))("toggleMask",!0))},dependencies:[P,R,q,J,G,X,j,A,L,ee,H,Z,te,ie,$,re,ne,K,oe,Q],styles:[".button-table[_ngcontent-%COMP%]{appearance:none;background-color:#fcfcfd;border-radius:4px;border-width:0;box-shadow:#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;box-sizing:border-box;color:#36395a;cursor:pointer;font-family:JetBrains Mono,monospace;height:35vh;width:30vw;list-style:none;overflow:hidden;padding-left:16px;padding-right:16px;position:relative;text-decoration:none;transition:box-shadow .15s,transform .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;will-change:box-shadow,transform;font-size:18px}.button-table[_ngcontent-%COMP%]:focus{box-shadow:#d6d6e7 0 0 0 1.5px inset,#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset}.button-table[_ngcontent-%COMP%]:hover{box-shadow:#2d234266 0 4px 8px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;transform:translateY(-2px)}.button-table[_ngcontent-%COMP%]:active{box-shadow:#d6d6e7 0 3px 7px inset;transform:translateY(2px)}"]})}}return n})();var pe=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=y({type:n})}static{this.\u0275inj=C({imports:[I.forChild([{path:"",component:le}]),I]})}}return n})();var Le=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=y({type:n})}static{this.\u0275inj=C({imports:[pe,se]})}}return n})();export{Le as UsersModule};
