<div class="qr-scanner-wrapper">
  <div *ngIf="!permissionDenied && !errorMessage" class="scanner-container">
    <div id="qr-scanner-container" #scannerContainer></div>

    <div class="scanner-overlay">
      <div class="scan-region">
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>
      </div>

      <p class="scan-instructions">Apunta al código QR</p>
    </div>

    <div class="torch-control" *ngIf="hasTorch && isScanning">
      <button
        type="button"
        class="torch-button"
        (click)="toggleTorch()"
        [class.active]="torchOn"
      >
        <i class="pi" [class.pi-sun]="torchOn" [class.pi-moon]="!torchOn"></i>
      </button>
    </div>
  </div>

  <div *ngIf="permissionDenied" class="permission-denied">
    <i class="pi pi-exclamation-triangle"></i>
    <h3>Permiso de cámara requerido</h3>
    <p>{{ errorMessage }}</p>
    <button type="button" class="retry-button" (click)="requestPermission()">
      Intentar de nuevo
    </button>
  </div>

  <div *ngIf="errorMessage && !permissionDenied" class="error-message">
    <i class="pi pi-times-circle"></i>
    <p>{{ errorMessage }}</p>
    <button type="button" class="retry-button" (click)="startScanner()">
      Reintentar
    </button>
  </div>
</div>
