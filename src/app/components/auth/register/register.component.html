<div
  class="surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"
>
  <div class="flex flex-column align-items-center justify-content-center">
    <img
      src="assets/layout/images/{{
        layoutService.config().colorScheme === 'light'
          ? 'logo-dark'
          : 'logo-white'
      }}.svg"
      alt="Kitchen Bar logo"
      class="mb-3 w-10rem flex-shrink-0"
    />
    <div
      class="w-full shadow-4"
      style="
        border-radius: 56px;
        padding: 0.3rem;
        background: linear-gradient(
          180deg,
          var(--primary-color) 10%,
          rgba(33, 150, 243, 0) 30%
        );
      "
    >
      <div
        class="w-full surface-card py-8 px-5 sm:px-8"
        style="border-radius: 53px"
      >
        <div class="text-center mb-5">
          <span class="text-900 font-medium">Registro</span>
        </div>

        <p-stepper orientation="vertical" class="w-12">
          <!-- STEP 1: PLAN SELECTION -->
          <p-stepperPanel header="Elige tu plan">
            <ng-template
              pTemplate="content"
              let-nextCallback="nextCallback"
              let-index="index"
            >
              <div class="grid">
                <div class="col-12 p-3">
                  <div class="flex flex-column gap-3">
                    <div
                      *ngFor="let license of licenses"
                      class="field-checkbox w-full card p-3 flex align-items-center justify-content-between cursor-pointer surface-hover"
                      (click)="selectedLicenseId = license.id || 0"
                    >
                      <div class="flex align-items-center gap-2">
                        <p-radioButton
                          name="license"
                          [value]="license.id"
                          [(ngModel)]="selectedLicenseId"
                        ></p-radioButton>
                        <div class="flex flex-column">
                          <span class="font-bold text-xl">{{
                            license.name
                          }}</span>
                          <span class="text-500">{{
                            license.description
                          }}</span>
                        </div>
                      </div>
                      <div class="flex flex-column align-items-end">
                        <span class="text-xl font-bold text-primary">{{
                          license.price | currency
                        }}</span>
                        <span class="text-sm">/ {{ license.period }} dias</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="flex py-4">
                <p-button label="Siguiente" (onClick)="nextCallback.emit()" />
              </div>
            </ng-template>
          </p-stepperPanel>

          <p-stepperPanel header="Datos personales">
            <ng-template
              pTemplate="content"
              let-nextCallback="nextCallback"
              let-index="index"
            >
              <div class="grid">
                <div class="col-12 lg:col-6 p-2 flex flex-column">
                  <div class="flex">
                    <label
                      for="name"
                      class="block text-900 text-xl font-medium mb-2"
                      >Nombre completo</label
                    >
                  </div>
                  <div class="flex align-items-center">
                    <input
                      id="name"
                      type="text"
                      [(ngModel)]="user.name"
                      #name="ngModel"
                      name="name"
                      [style]="{ width: '100%' }"
                      pInputText
                    />
                  </div>
                </div>
                <div class="col-12 lg:col-6 p-2 flex flex-column">
                  <div class="flex">
                    <label
                      for="phone"
                      class="block text-900 text-xl font-medium mb-2"
                      >Telefono</label
                    >
                  </div>
                  <div class="flex align-items-center">
                    <p-inputMask
                      id="phone"
                      type="text"
                      [(ngModel)]="user.phone_number"
                      mask="99-9999-9999"
                      placeholder="99-9999-9999"
                      #phone_number="ngModel"
                      name="phone_number"
                      class="w-full"
                      [style]="{ width: '100%' }"
                    />
                  </div>
                </div>
              </div>
              <div class="grid">
                <div class="col-12 lg:col-6 p-2 flex flex-column">
                  <div class="flex">
                    <label
                      for="email"
                      class="block text-900 text-xl font-medium mb-2"
                      >Correo</label
                    >
                  </div>
                  <div class="flex align-items-center">
                    <input
                      type="text"
                      pInputText
                      id="email"
                      type="text"
                      [(ngModel)]="user.email"
                      #email="ngModel"
                      name="email"
                      [style]="{ width: '100%' }"
                      placeholder="user@kitenbar.com"
                      type="email"
                    />
                  </div>
                </div>
              </div>
              <div class="flex py-4">
                <p-button
                  label="Siguiente"
                  (onClick)="nextCallback.emit()"
                /></div
            ></ng-template>
          </p-stepperPanel>
          <p-stepperPanel header="Datos de tu negocio">
            <ng-template
              pTemplate="content"
              let-prevCallback="prevCallback"
              let-nextCallback="nextCallback"
              let-index="index"
            >
              <div class="grid">
                <div class="col-12 lg:col-6 p-2 flex flex-column gap-2">
                  <div class="flex">
                    <label
                      for="client"
                      class="block text-900 text-xl font-medium mb-2"
                      >Nombre del negocio</label
                    >
                  </div>
                  <div class="flex align-items-center">
                    <input
                      type="text"
                      pInputText
                      [(ngModel)]="user.instance!.name_client"
                      class="w-full"
                    />
                  </div>
                </div>
                <div class="col-12 lg:col-6 p-2 flex flex-column gap-2">
                  <div class="flex">
                    <label
                      for="kitchen"
                      class="block text-900 text-xl font-medium mb-2"
                      >Nombre corto del negocio</label
                    >
                  </div>
                  <div class="flex align-items-center">
                    <input
                      type="text"
                      pInputText
                      [(ngModel)]="user.instance!.name_kitchen"
                      class="w-full"
                      onkeypress="toLowerCase()"
                      aria-describedby="kitchename-help"
                    />
                  </div>
                  <div class="flex align-items-center">
                    <small id="kitchename-help">
                      * Ingresa el nombre corto del negocio sin espacios .
                    </small>
                  </div>
                </div>
                <div class="col-12 p-1 flex flex-column gap-2">
                  <div class="flex">
                    <label
                      for="kitchen"
                      class="block text-900 text-xl font-medium mb-2"
                      >Sucursales</label
                    >
                  </div>
                  <div class="flex align-items-center">
                    <small id="kitchename-help">
                      * Ingresa por lo menos una sucursal.
                    </small>
                  </div>
                  <div class="flex align-items-center gap-2">
                    <input
                      type="text"
                      pInputText
                      [(ngModel)]="branch.name"
                      placeholder="Agregar sucursal"
                      class="w-full"
                    />
                    <p-button (onClick)="addBranche()"> Agregar</p-button>
                  </div>
                  <div class="card w-full px-2 mt-2">
                    <p-dataView
                      #dv
                      [value]="user.instance!.branches"
                      emptyMessage="Sin sucursales"
                    >
                      <ng-template pTemplate="list" let-items>
                        <div class="grid grid-nogutter">
                          <div
                            class="col-12 p-2"
                            *ngFor="
                              let item of user.instance!.branches;
                              track: item;
                              let i = index;
                              let first = first
                            "
                          >
                            <div
                              class="grid"
                              [ngClass]="{
                                'border-top-1 surface-border': !first
                              }"
                            >
                              <div class="col">
                                <div class="text-900 mt-1">{{ item.name }}</div>
                              </div>
                              <div class="col-fixed gap-1">
                                <p-button
                                  pTooltip="Eliminar"
                                  icon="pi pi-trash"
                                  severity="danger"
                                  [rounded]="true"
                                  [text]="true"
                                  size="small"
                                  (onClick)="deleteBranche(i)"
                                ></p-button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </ng-template>
                    </p-dataView>
                  </div>
                </div>
              </div>
              <div class="flex py-4 gap-2">
                <p-button
                  label="Volver"
                  severity="secondary"
                  (onClick)="prevCallback.emit()"
                />
                <p-button label="Siguiente" (onClick)="nextCallback.emit()" />
              </div>
            </ng-template>
          </p-stepperPanel>
          <p-stepperPanel header="Usuario">
            <ng-template
              pTemplate="content"
              let-prevCallback="prevCallback"
              let-index="index"
            >
              <div class="grid">
                <div class="col-12 lg:col-6 p-2 flex flex-column">
                  <div class="flex">
                    <label
                      for="kitchen"
                      class="block text-900 text-xl font-medium mb-2"
                      >Usuario</label
                    >
                  </div>
                  <p-inputGroup>
                    <input
                      id="user_name"
                      type="text"
                      [(ngModel)]="user.user_name"
                      pInputText
                    />
                    <p-inputGroupAddon>{{
                      "@" +
                        (user.instance?.name_kitchen
                          ? user.instance?.name_kitchen?.toLowerCase()
                          : "kitchenbar")
                    }}</p-inputGroupAddon>
                  </p-inputGroup>
                </div>
                <div class="col-12 lg:col-6 p-2 flex flex-column">
                  <div class="flex">
                    <label
                      for="kitchen"
                      class="block text-900 text-xl font-medium mb-2"
                      >Contraseña</label
                    >
                  </div>
                  <div class="flex align-items-center">
                    <p-password
                      id="password"
                      [(ngModel)]="user.password"
                      #password="ngModel"
                      name="password"
                      class="w-full"
                      [style]="{ width: '100%' }"
                      [inputStyle]="{ width: '100%' }"
                      [toggleMask]="true"
                      promptLabel="Elegir una contraseña"
                      weakLabel="Contraseña simple"
                      mediumLabel="Contraseña aceptable"
                      strongLabel="Contraseña fuerte"
                    ></p-password>
                  </div>
                </div>
              </div>
              <div class="flex py-4 gap-3">
                <p-button
                  label="Volver"
                  severity="secondary"
                  (onClick)="prevCallback.emit()"
                />
                <p-button label="Registrarme" (onClick)="register()" />
              </div>
            </ng-template>
          </p-stepperPanel>
        </p-stepper>
      </div>
    </div>
  </div>
</div>
