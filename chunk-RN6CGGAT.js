import{d as I}from"./chunk-64WP64BE.js";import{b as ee,e as ie,f as ne,g as re,h as oe,j as ae}from"./chunk-IXSFSNLD.js";import{b as se}from"./chunk-J6VSZILJ.js";import{a as K,g as Q,j as X,n as $}from"./chunk-65D7KFAQ.js";import{d as te}from"./chunk-ETYH724P.js";import{b as J,c as H}from"./chunk-BJ7UQRZ4.js";import{b as j,d as L,g as A,j as z,o as Y,r as q,t as Z}from"./chunk-MLSKFZ7F.js";import"./chunk-4YRY4IP2.js";import{e as O,l as G}from"./chunk-JY4AAIVW.js";import{$ as E,A as l,B as p,Ca as x,Da as R,N as d,O as v,W as S,Y as u,Ya as D,Za as N,ba as i,ca as n,da as g,ha as U,ia as h,ja as C,na as F,r as y,sb as B,ta as k,ua as m,v as W,va as V,w as M,wa as P,xa as _,ya as f,za as w}from"./chunk-VUSRYWWQ.js";var T=()=>({width:"100%"}),me=r=>({"border-top-1 surface-border":r});function ce(r,b){if(r&1){let t=U();i(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32),m(4),n()(),i(5,"div",33)(6,"p-button",34),h("click",function(){let e=l(t).$implicit,a=C(2);return p(a.showModal(!0,e))}),n()(),i(7,"div",33)(8,"p-button",35),h("click",function(){let e=l(t).$implicit,a=C(2);return p(a.confirmDeleted(e))}),n()()()()}if(r&2){let t=b.$implicit,o=b.first;d(),u("ngClass",R(2,me,!o)),d(3),V(t.name)}}function ue(r,b){if(r&1&&(i(0,"div",27),S(1,ce,9,4,"div",28),n()),r&2){let t=b.$implicit;d(),u("ngForOf",t)}}function he(r,b){if(r&1){let t=U();i(0,"div",36)(1,"div",37),g(2,"i",38),n(),i(3,"span",39),m(4),n(),i(5,"p",40),m(6),n(),i(7,"div",41)(8,"button",42),h("click",function(){l(t),C();let e=k(45);return p(e.accept())}),n(),i(9,"button",43),h("click",function(){l(t),C();let e=k(45);return p(e.reject())}),n()()()}if(r&2){let t=b.$implicit;d(4),P(" ",t.header," "),d(2),V(t.message)}}var pe=(()=>{class r{constructor(t,o,e,a){this.confirmationService=t,this._serviceAuth=o,this._serviceBranch=e,this.usersServices=a,this.items=[],this.branches=[],this.user=new I,this.current=new I,this.visibleModal=!1,this.isEdit=!1,this.roles=[{id:1,name:"Admin"},{id:2,name:"Mesero"}]}ngOnInit(){this.getUsers(),this.getBranches(),this.current=this._serviceAuth.getCurrentUser()}getUsers(){this.usersServices.getItemsByInstance().subscribe({next:t=>{this.items=t},error:t=>console.error(t)})}getBranches(){this._serviceBranch.getItemsByInstance().subscribe({next:t=>{this.branches=t},error:t=>console.error(t)})}showModal(t=!1,o){this.selectedRol=null,this.selectedBranche=null,t?(this.user=o,this.user.user_name=o?.user_name?.split("@")[0],this.user.password="",this.selectedRol=this.roles.find(e=>e.id==o?.role),this.selectedBranche=this.branches.find(e=>e.id==o?.branchId),console.log(this.selectedRol)):this.user=new I,this.isEdit=t,this.visibleModal=!0}confirmSave(){this.user.user_name=this.user.user_name+"@"+this.current.instance.name_kitchen.toLowerCase(),this.user.role=this.selectedRol.id,this.user.branchId=this.selectedBranche.id,this.isEdit?this.usersServices.updateItem(this.user.id,this.user).subscribe({next:t=>this.getUsers(),error:t=>console.error(t)}):this.usersServices.createItem(this.user).subscribe({next:t=>this.getUsers(),error:t=>console.error(t)}),this.selectedRol=null,this.selectedBranche=null,this.visibleModal=!1}confirmDeleted(t){this.confirmationService.confirm({header:"Estas seguro de eliminar?",message:"Por favor de confirmar.",accept:()=>{this.usersServices.deleteItem(this.user.id).subscribe({next:o=>this.getUsers(),error:o=>console.error(o)})}})}static{this.\u0275fac=function(o){return new(o||r)(v(O),v(z),v(q),v(Y))}}static{this.\u0275cmp=W({type:r,selectors:[["app-tables"]],decls:47,vars:27,consts:[["dv",""],["password","ngModel"],["cd",""],["header","Usuarios",1,""],[1,"w-full"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar"],["type","button","pButton","","icon","pi pi-plus","size","small","pTooltip","Nuevo usuario",1,"p-button-success",3,"click"],["emptyMessage","Usuarios no registrados",3,"value","rows","paginator"],["pTemplate","list"],[3,"visibleChange","header","modal","visible"],[1,"formgrid","grid","gap-3","mb-3","mt-3"],[1,"field","col-12"],["for","name"],["pInputText","","id","name","type","text",1,"w-full",3,"ngModelChange","ngModel"],["for","role"],["id","role","optionLabel","name","placeholder","Selecciona la sucursal",3,"ngModelChange","options","ngModel"],["id","role","optionLabel","name","placeholder","Selecciona el Rol",3,"ngModelChange","options","ngModel"],["pTooltip","usuario@nombre-bar",1,"field","col-12"],["for","user_name"],["id","user_name","type","text","pInputText","",3,"ngModelChange","ngModel"],["for","password"],["id","password","name","password",3,"ngModelChange","ngModel","inputStyle","toggleMask"],[1,"flex","justify-content-end","gap-2"],["label","Cancelar","severity","secondary",3,"click"],["label","Guardar",3,"click"],["pTemplate","headless"],[1,"grid","grid-nogutter"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"grid","p-2",3,"ngClass"],[1,"col"],[1,"overflow-hidden","text-overflow-ellipsis","text-lg","font-medium","text-900","mt-2",2,"width","100px"],[1,"col-fixed","gap-1"],["icon","pi pi-pencil","size","small","pTooltip","Editar",3,"click"],["severity","danger","icon","pi pi-trash","size","small","pTooltip","Eliminar",3,"click"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(o,e){if(o&1){let a=U();i(0,"p-card",3)(1,"div")(2,"p-inputGroup",4)(3,"p-inputGroupAddon"),g(4,"i",5),n(),g(5,"input",6),i(6,"button",7),h("click",function(){return l(a),p(e.showModal())}),n()(),i(7,"p-dataView",8,0),S(9,ue,2,1,"ng-template",9),n()()(),i(10,"p-dialog",10),w("visibleChange",function(s){return l(a),f(e.visibleModal,s)||(e.visibleModal=s),p(s)}),i(11,"div",11)(12,"div",12)(13,"label",13),m(14,"Nombre del usuario"),n(),i(15,"input",14),w("ngModelChange",function(s){return l(a),f(e.user.name,s)||(e.user.name=s),p(s)}),n()(),i(16,"div",12),g(17,"p-divider"),n(),i(18,"div",12)(19,"label",15),m(20,"Sucursal"),n(),i(21,"p-dropdown",16),w("ngModelChange",function(s){return l(a),f(e.selectedBranche,s)||(e.selectedBranche=s),p(s)}),n()(),i(22,"div",12),g(23,"p-divider"),n(),i(24,"div",12)(25,"label",15),m(26,"Rol"),n(),i(27,"p-dropdown",17),w("ngModelChange",function(s){return l(a),f(e.selectedRol,s)||(e.selectedRol=s),p(s)}),n()(),i(28,"div",18)(29,"label",19),m(30,"Usuario"),n(),i(31,"p-inputGroup")(32,"input",20),w("ngModelChange",function(s){return l(a),f(e.user.user_name,s)||(e.user.user_name=s),p(s)}),n(),i(33,"p-inputGroupAddon"),m(34),n()()(),i(35,"div",12)(36,"label",21),m(37,"Contrase\xF1a"),n(),i(38,"p-password",22,1),w("ngModelChange",function(s){return l(a),f(e.user.password,s)||(e.user.password=s),p(s)}),n()()(),i(40,"div",23)(41,"p-button",24),h("click",function(){return l(a),p(e.visibleModal=!1)}),n(),i(42,"p-button",25),h("click",function(){return l(a),p(e.confirmSave())}),n()()(),g(43,"p-toast"),i(44,"p-confirmDialog",null,2),S(46,he,10,2,"ng-template",26),n()}o&2&&(d(7),u("value",e.items)("rows",5)("paginator",!0),d(3),F("header","",e.isEdit?"Editar":"Nuevo"," usuario"),u("modal",!0),_("visible",e.visibleModal),d(5),_("ngModel",e.user.name),d(6),E(x(23,T)),u("options",e.branches),_("ngModel",e.selectedBranche),d(6),E(x(24,T)),u("options",e.roles),_("ngModel",e.selectedRol),d(5),_("ngModel",e.user.user_name),d(2),V("@"+e.current.instance.name_kitchen.toLowerCase()),d(4),E(x(25,T)),_("ngModel",e.user.password),u("inputStyle",x(26,T))("toggleMask",!0))},dependencies:[D,N,J,H,G,Z,j,L,A,te,K,$,ie,ne,ee,oe,re,Q,se,X],styles:[".button-table[_ngcontent-%COMP%]{appearance:none;background-color:#fcfcfd;border-radius:4px;border-width:0;box-shadow:#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;box-sizing:border-box;color:#36395a;cursor:pointer;font-family:JetBrains Mono,monospace;height:35vh;width:30vw;list-style:none;overflow:hidden;padding-left:16px;padding-right:16px;position:relative;text-decoration:none;transition:box-shadow .15s,transform .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;will-change:box-shadow,transform;font-size:18px}.button-table[_ngcontent-%COMP%]:focus{box-shadow:#d6d6e7 0 0 0 1.5px inset,#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset}.button-table[_ngcontent-%COMP%]:hover{box-shadow:#2d234266 0 4px 8px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;transform:translateY(-2px)}.button-table[_ngcontent-%COMP%]:active{box-shadow:#d6d6e7 0 3px 7px inset;transform:translateY(2px)}"]})}}return r})();var de=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=M({type:r})}static{this.\u0275inj=y({imports:[B.forChild([{path:"",component:pe}]),B]})}}return r})();var Ae=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=M({type:r})}static{this.\u0275inj=y({imports:[de,ae]})}}return r})();export{Ae as UsersModule};
