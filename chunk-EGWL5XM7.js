import{a as K,b as A,j as G}from"./chunk-IXSFSNLD.js";import"./chunk-J6VSZILJ.js";import{a as H,n as z}from"./chunk-65D7KFAQ.js";import"./chunk-ETYH724P.js";import{b as R,c as q}from"./chunk-BJ7UQRZ4.js";import{m as B,p as P}from"./chunk-MLSKFZ7F.js";import"./chunk-4YRY4IP2.js";import{e as y,l as D}from"./chunk-JY4AAIVW.js";import{$ as S,A as p,Aa as M,B as _,Ca as T,Da as F,N as n,O as h,W as m,Y as a,Ya as j,Za as N,_a as $,ba as s,ca as o,da as b,e as I,ha as v,ia as u,ja as l,r as C,sb as E,ta as w,ua as f,v as k,va as x,w as O,wa as V}from"./chunk-VUSRYWWQ.js";var W=()=>({width:"100%"}),X=()=>({width:"450px"}),Y=t=>({"border-top-1 surface-border":t});function Z(t,c){t&1&&b(0,"img",23)}function ee(t,c){t&1&&b(0,"img",24)}function te(t,c){if(t&1){let e=v();s(0,"div",18)(1,"p-button",25),u("onClick",function(r){p(e);let d=l().$implicit,g=l(2),U=w(10);return _(g.toggleComents(r,U,d))}),o()()}t&2&&(n(),a("rounded",!0)("raised",!0))}function ie(t,c){if(t&1){let e=v();s(0,"div",18)(1,"p-button",26),u("onClick",function(r){p(e);let d=l().$implicit,g=l(2);return _(g.changeStatusOrder(r,d,2))}),o()()}t&2&&(n(),a("rounded",!0)("raised",!0))}function ne(t,c){if(t&1){let e=v();s(0,"div",18)(1,"p-button",27),u("onClick",function(r){p(e);let d=l().$implicit,g=l(2);return _(g.changeStatusOrder(r,d,3))}),o()()}if(t&2){let e=l().$implicit;n(),a("disabled",e.statusOrderId===1)("rounded",!0)("raised",!0)}}function re(t,c){if(t&1&&(s(0,"div",13)(1,"div",14)(2,"div",15),m(3,Z,1,0,"img",16)(4,ee,1,0,"img",17),o(),s(5,"div",18)(6,"div",19),f(7),o()(),s(8,"div",20)(9,"div",21),f(10),o()(),m(11,te,2,2,"div",22)(12,ie,2,2,"div",22)(13,ne,2,3,"div",22),o()()),t&2){let e=c.$implicit,i=c.first;n(),a("ngClass",F(8,Y,!i)),n(2),a("ngIf",e.statusOrderId==1&&!e.isCancel),n(),a("ngIf",e.statusOrderId==2&&!e.isCancel),n(3),x(e.table==null?null:e.table.name),n(3),x(e.quantity+" "+(e.meal==null?null:e.meal.name)),n(),a("ngIf",e.aditional!=null),n(),a("ngIf",e.statusOrderId!=2),n(),a("ngIf",e.statusOrderId!=3)}}function oe(t,c){if(t&1&&(s(0,"div",11),m(1,re,14,10,"div",12),o()),t&2){let e=c.$implicit;n(),a("ngForOf",e)}}function se(t,c){if(t&1){let e=v();s(0,"div",28)(1,"div",29),b(2,"i",30),o(),s(3,"span",31),f(4),o(),s(5,"p",32),f(6),o(),s(7,"div",33)(8,"button",34),u("click",function(){p(e),l();let r=w(7);return _(r.accept())}),o(),s(9,"button",35),u("click",function(){p(e),l();let r=w(7);return _(r.reject())}),o()()()}if(t&2){let e=c.$implicit;n(4),V(" ",e.header," "),n(2),x(e.message)}}function ae(t,c){if(t&1&&(s(0,"div",19),f(1),o()),t&2){let e=l();n(),x(e.coments)}}var L=(()=>{class t{constructor(e,i,r){this.confirmationService=e,this._serviceOrder=i,this.hub=r}ngOnInit(){return I(this,null,function*(){this.retrieveOrders(),this.hub.receiveOrderToKitchen().subscribe(e=>{this.retrieveOrders()})})}delay(e){return I(this,null,function*(){return new Promise(i=>setTimeout(i,e))})}retrieveOrders(){this._serviceOrder.getItemsByInstance().subscribe({next:e=>{this.items=e.filter(i=>i.isCancel==!1&&(i.statusOrderId==1||i.statusOrderId==2))},error:e=>console.error(e)})}changeStatusOrder(e,i,r){this.confirmationService.confirm({target:e.target,message:"",header:r==2?"Se inicio con la preparacion?":"Se envio el alimento?",accept:()=>{i.statusOrderId=r,this._serviceOrder.updateItem(i.id,i).subscribe({next:d=>{this.hub.sendOrder(i)},error:d=>console.error(d)})}})}toggleComents(e,i,r){this.coments=r.aditional,i.toggle(e)}static{this.\u0275fac=function(i){return new(i||t)(h(y),h(B),h(P))}}static{this.\u0275cmp=k({type:t,selectors:[["app-tables"]],features:[M([y])],decls:12,vars:10,consts:[["dv",""],["cd",""],["op",""],[1,"grid"],[1,"col-10","col-offset-1"],["header","Ordenes"],["emptyMessage","Sin ordenes en proceso",3,"value","rows","paginator"],["pTemplate","list"],["pTemplate","headless"],[3,"showCloseIcon"],["pTemplate","content"],[1,"grid","grid-nogutter"],["class","col-12 pb-2",4,"ngFor","ngForOf"],[1,"col-12","pb-2"],[1,"grid",3,"ngClass"],[1,"col-fixed"],["alt","dropdown icon","src","assets/images/icon/process.svg","style","width: 25px;",4,"ngIf"],["alt","dropdown icon","src","assets/images/icon/uniform.svg","style","width: 25px;",4,"ngIf"],[1,"col-fixed","gap-1"],[1,"font-medium","text-700","mt-2"],[1,"col","gap-2"],[1,"text-lg","font-medium","text-900","mt-2"],["class","col-fixed gap-1",4,"ngIf"],["alt","dropdown icon","src","assets/images/icon/process.svg",2,"width","25px"],["alt","dropdown icon","src","assets/images/icon/uniform.svg",2,"width","25px"],["severity","secondary","icon","pi pi-comment",3,"onClick","rounded","raised"],["severity","warning","icon","pi pi-flag",3,"onClick","rounded","raised"],["severity","help","icon","pi pi-send",3,"onClick","disabled","rounded","raised"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(i,r){i&1&&(s(0,"div",3)(1,"div",4)(2,"p-card",5)(3,"p-dataView",6,0),m(5,oe,2,1,"ng-template",7),o()()()(),s(6,"p-confirmDialog",null,1),m(8,se,10,2,"ng-template",8),o(),s(9,"p-overlayPanel",9,2),m(11,ae,2,1,"ng-template",10),o()),i&2&&(n(2),S(T(8,W)),n(),a("value",r.items)("rows",10)("paginator",!0),n(6),S(T(9,X)),a("showCloseIcon",!0))},dependencies:[j,N,$,R,q,D,H,K,z,A]})}}return t})();var Q=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=O({type:t})}static{this.\u0275inj=C({imports:[E.forChild([{path:"",component:L}]),E]})}}return t})();var Se=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=O({type:t})}static{this.\u0275inj=C({imports:[Q,G]})}}return t})();export{Se as OrdersModule};
