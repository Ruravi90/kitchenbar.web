import{a as O}from"./chunk-UUS4ZWI4.js";import{c as z}from"./chunk-64WP64BE.js";import{b as X,c as Z,e as $,f as ee,g as te,h as ie,j as ne,k as re}from"./chunk-IFFKKBZV.js";import"./chunk-BQVHG75P.js";import{a as H,g as Y,n as K}from"./chunk-OSNXDCNO.js";import"./chunk-QFKRZ7EC.js";import{b as G,c as U}from"./chunk-GQ2UZOTQ.js";import{b as W,d as Q,g as j,n as F,t as J}from"./chunk-5C42LTVV.js";import"./chunk-4YRY4IP2.js";import{e as A,l as P}from"./chunk-IDCO3KAE.js";import{$a as N,Aa as v,Ba as w,C as s,D as m,Ea as R,Fa as L,P as c,Q as M,Y as C,_ as u,_a as B,ba as q,da as r,ea as a,fa as g,ja as x,ka as d,la as _,pa as k,t as T,va as S,vb as E,wa as b,x as V,xa as D,y,ya as I,za as h}from"./chunk-LVDDLAXI.js";var se=()=>({width:"100%"}),me=o=>({"border-top-1 surface-border":o});function pe(o,f){if(o&1){let t=x();r(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),b(4),a()(),r(5,"div",30)(6,"p-button",31),d("click",function(){let e=s(t).$implicit,l=_(2);return m(l.showQRModal(e))}),a()(),r(7,"div",30)(8,"p-button",32),d("click",function(){let e=s(t).$implicit,l=_(2);return m(l.showModal(!0,e))}),a()(),r(9,"div",30)(10,"p-button",33),d("click",function(){let e=s(t).$implicit,l=_(2);return m(l.confirmDeleted(e))}),a()()()()}if(o&2){let t=f.$implicit,i=f.first;c(),u("ngClass",L(2,me,!i)),c(3),D(t.name)}}function ce(o,f){if(o&1&&(r(0,"div",24),C(1,pe,11,4,"div",25),a()),o&2){let t=f.$implicit;c(),u("ngForOf",t)}}function de(o,f){if(o&1){let t=x();r(0,"div",34)(1,"div",35),g(2,"i",36),a(),r(3,"span",37),b(4),a(),r(5,"p",38),b(6),a(),r(7,"div",39)(8,"button",40),d("click",function(){s(t),_();let e=S(28);return m(e.accept())}),a(),r(9,"button",41),d("click",function(){s(t),_();let e=S(28);return m(e.reject())}),a()()()}if(o&2){let t=f.$implicit;c(4),I(" ",t.header," "),c(2),D(t.message)}}var ae=(()=>{class o{constructor(t,i){this.confirmationService=t,this.tablesServices=i,this.tables=[],this.table={},this.visibleModal=!1,this.visibleQRModal=!1,this.isEdit=!1,this.qrData={allowEmptyString:!0,alt:"A custom alt attribute",ariaLabel:"QR Code image with the following content...",colorDark:"#000000ff",colorLight:"#ffffffff",cssClass:"center",elementType:"canvas",errorCorrectionLevel:"M",imageSrc:"./assets/layout/images/logo-dark.svg",imageHeight:75,imageWidth:150,margin:4,qrdata:"",scale:1,version:void 0,title:"A custom title attribute",width:300},this.elementType="canvas"}ngOnInit(){this.getTables()}getTables(){this.tablesServices.getItemsByInstance().subscribe({next:t=>{this.tables=t},error:t=>console.error(t)})}showModal(t=!1,i){this.isEdit=t,t?this.table=i:this.table=new z,this.visibleModal=!0}confirmSave(){this.isEdit?this.tablesServices.updateItem(this.table.id,this.table).subscribe({next:t=>this.getTables(),error:t=>console.error(t)}):this.tablesServices.createItem(this.table).subscribe({next:t=>this.getTables(),error:t=>console.error(t)}),this.visibleModal=!1}confirmDeleted(t){this.confirmationService.confirm({header:"Estas seguro de eliminar?",message:"Por favor de confirmar.",accept:()=>{this.tablesServices.deleteItem(t.id).subscribe({next:i=>this.getTables(),error:i=>console.error(i)})}})}showQRModal(t){this.visibleQRModal=!0,this.table=t,this.qrData.qrdata=O.baseUrl+t.identity}saveQRAsImage(t){let i=null;if(this.elementType==="canvas"?i=t.qrcElement.nativeElement.querySelector("canvas").toDataURL("image/png"):this.elementType==="img"||this.elementType==="url"?i=t.qrcElement.nativeElement.querySelector("img").src:alert("Set elementType to 'canvas', 'img' or 'url'."),i){let e=this.convertBase64ToBlob(i),l=new Blob([e],{type:"image/png"}),p=window.URL.createObjectURL(l),n=document.createElement("a");n.href=p,n.download="angularx-qrcode",n.click()}this.visibleQRModal=!1}convertBase64ToBlob(t){let i=t.split(";base64,"),e=i[0].split(":")[1],l=window.atob(i[1]),p=new Uint8Array(l.length);for(let n=0;n<l.length;++n)p[n]=l.charCodeAt(n);return new Blob([p],{type:e})}static{this.\u0275fac=function(i){return new(i||o)(M(A),M(F))}}static{this.\u0275cmp=V({type:o,selectors:[["app-tables"]],decls:37,vars:33,consts:[["dv",""],["cd",""],["parent",""],[1,"flex","flex-wrap","justify-content-center"],[1,"w-full"],["header","Mesas",1,""],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar"],["type","button","pButton","","icon","pi pi-plus","size","small","pTooltip","Nueva mesa",1,"p-button-success",3,"click"],["emptyMessage","Sin mesas registradas",3,"value","rows","paginator"],["pTemplate","list"],[3,"visibleChange","header","modal","visible"],[1,"formgrid","grid","gap-3","mb-3","mt-3"],[1,"field","col-12"],["for","tableName"],["id","tableName","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full",3,"ngModelChange","ngModel"],["for","Description"],["id","Description","rows","2","cols","30","pInputTextarea","","placeholder","Descripcion",3,"ngModelChange","autoResize","ngModel"],[1,"flex","justify-content-end","gap-2"],["label","Cancelar","severity","secondary",3,"click"],["label","Guardar",3,"click"],["pTemplate","headless"],[3,"elementType","errorCorrectionLevel","qrdata","scale","width","allowEmptyString","className","colorDark","colorLight","margin","alt","ariaLabel","title","imageSrc","imageHeight","imageWidth"],["icon","pi pi-cloud-download","label","Descargar",3,"click"],[1,"grid","grid-nogutter","p-4"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"grid","p-2",3,"ngClass"],[1,"col"],[1,"overflow-hidden","text-overflow-ellipsis","text-md","font-medium","text-900","mt-2",2,"width","100px"],[1,"col-fixed","gap-1"],["icon","pi pi-cloud-download","size","small","pTooltip","Descargar QR",3,"click"],["icon","pi pi-pencil","size","small","pTooltip","Editar",3,"click"],["severity","danger","icon","pi pi-trash","size","small","pTooltip","Eliminar",3,"click"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(i,e){if(i&1){let l=x();r(0,"div",3)(1,"div",4)(2,"p-card",5)(3,"div")(4,"p-inputGroup",4)(5,"p-inputGroupAddon"),g(6,"i",6),a(),g(7,"input",7),r(8,"button",8),d("click",function(){return s(l),m(e.showModal())}),a()(),r(9,"p-dataView",9,0),C(11,ce,2,1,"ng-template",10),a()()()()(),r(12,"p-dialog",11),w("visibleChange",function(n){return s(l),v(e.visibleModal,n)||(e.visibleModal=n),m(n)}),r(13,"div",12)(14,"div",13)(15,"label",14),b(16,"Nombre de mesa"),a(),r(17,"input",15),w("ngModelChange",function(n){return s(l),v(e.table.name,n)||(e.table.name=n),m(n)}),a()(),r(18,"div",13)(19,"label",16),b(20,"Descripcion"),a(),r(21,"textarea",17),w("ngModelChange",function(n){return s(l),v(e.table.additional,n)||(e.table.additional=n),m(n)}),b(22,"            "),a()()(),r(23,"div",18)(24,"p-button",19),d("click",function(){return s(l),m(e.visibleModal=!1)}),a(),r(25,"p-button",20),d("click",function(){return s(l),m(e.confirmSave())}),a()()(),g(26,"p-toast"),r(27,"p-confirmDialog",null,1),C(29,de,10,2,"ng-template",21),a(),r(30,"p-dialog",11),w("visibleChange",function(n){return s(l),v(e.visibleQRModal,n)||(e.visibleQRModal=n),m(n)}),r(31,"div",12),g(32,"qrcode",22,2),a(),r(34,"div",18)(35,"p-button",19),d("click",function(){return s(l),m(e.visibleQRModal=!1)}),a(),r(36,"p-button",23),d("click",function(){s(l);let n=S(33);return m(e.saveQRAsImage(n))}),a()()()}i&2&&(c(9),u("value",e.tables)("rows",5)("paginator",!0),c(3),k("header","",e.isEdit?"Editar":"Nueva"," mesa"),u("modal",!0),h("visible",e.visibleModal),c(5),h("ngModel",e.table.name),c(4),q(R(32,se)),u("autoResize",!0),h("ngModel",e.table.additional),c(9),k("header","QR de mesa ",e.table.name,""),u("modal",!0),h("visible",e.visibleQRModal),c(2),u("elementType",e.elementType)("errorCorrectionLevel",e.qrData.errorCorrectionLevel)("qrdata",e.qrData.qrdata)("scale",e.qrData.scale)("width",e.qrData.width)("allowEmptyString",!0)("className",e.qrData.cssClass)("colorDark",e.qrData.colorDark)("colorLight",e.qrData.colorLight)("margin",e.qrData.margin)("alt",e.qrData.alt)("ariaLabel",e.qrData.ariaLabel)("title",e.qrData.title)("imageSrc",e.qrData.imageSrc)("imageHeight",e.qrData.imageHeight)("imageWidth",e.qrData.imageWidth))},dependencies:[B,N,G,U,P,J,W,Q,j,H,Z,K,$,ee,X,ie,te,Y,ne],styles:[".button-table[_ngcontent-%COMP%]{appearance:none;background-color:#fcfcfd;border-radius:4px;border-width:0;box-shadow:#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;box-sizing:border-box;color:#36395a;cursor:pointer;font-family:JetBrains Mono,monospace;height:35vh;width:30vw;list-style:none;overflow:hidden;padding-left:16px;padding-right:16px;position:relative;text-decoration:none;transition:box-shadow .15s,transform .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;will-change:box-shadow,transform;font-size:18px}.button-table[_ngcontent-%COMP%]:focus{box-shadow:#d6d6e7 0 0 0 1.5px inset,#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset}.button-table[_ngcontent-%COMP%]:hover{box-shadow:#2d234266 0 4px 8px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;transform:translateY(-2px)}.button-table[_ngcontent-%COMP%]:active{box-shadow:#d6d6e7 0 3px 7px inset;transform:translateY(2px)}"]})}}return o})();var le=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=y({type:o})}static{this.\u0275inj=T({imports:[E.forChild([{path:"",component:ae}]),E]})}}return o})();var je=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=y({type:o})}static{this.\u0275inj=T({imports:[le,re]})}}return o})();export{je as TablesModule};
