<div class="flex flex-wrap justify-content-center ">
    <div class="w-full">
        <p-card header="KDS Pro" [style]="{'width':'100%'}">
            <p-tabView>
                <!-- KITCHEN TAB -->
                <p-tabPanel header="Cocina" leftIcon="pi pi-box">
                    <p-dataView #dvKitchen [value]="kitchenItems" [rows]="10" [paginator]="true" emptyMessage="Sin ordenes de cocina">
                        <ng-template pTemplate="list" let-items>
                            <div class="grid grid-nogutter">
                                <div class="col-12 pb-2" *ngFor="let item of items; let first = first">
                                    <div class="grid align-items-center p-2 border-bottom-1 surface-border" [ngClass]="{'border-top-1': first}">
                                        <div class="col-fixed" style="width: 100px;">
                                            <p-tag [value]="getElapsedTime(item.createdAt)" [severity]="getSeverity(item.createdAt)" icon="pi pi-clock"></p-tag>
                                        </div>
                                        <div class="col-fixed gap-1">
                                            <p-chip [label]="item.table?.name" icon="pi pi-table"></p-chip>
                                        </div>
                                        <div class="col">
                                            <div class="text-xl font-bold text-900">{{ item.quantity }}x {{ item.meal?.name }}</div>
                                            <div *ngIf="item.aditional" class="text-sm text-600 mt-1"><i class="pi pi-comment mr-1"></i>{{ item.aditional }}</div>
                                        </div>
                                        <div class="col-fixed gap-2 flex">
                                            <p-button *ngIf="item.statusOrderId == 1" label="Preparar" severity="warning" icon="pi pi-cog" (onClick)="changeStatusOrder($event,item,2)"></p-button>
                                            <p-button *ngIf="item.statusOrderId == 2" label="Terminar" severity="success" icon="pi pi-check" (onClick)="changeStatusOrder($event,item,3)"></p-button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </p-dataView>
                </p-tabPanel>

                <!-- BAR TAB -->
                <p-tabPanel header="Bar" leftIcon="pi pi-filter">
                    <p-dataView #dvBar [value]="barItems" [rows]="10" [paginator]="true" emptyMessage="Sin ordenes de bar">
                        <ng-template pTemplate="list" let-items>
                            <div class="grid grid-nogutter">
                                <div class="col-12 pb-2" *ngFor="let item of items; let first = first">
                                    <div class="grid align-items-center p-2 border-bottom-1 surface-border" [ngClass]="{'border-top-1': first}">
                                        <div class="col-fixed" style="width: 100px;">
                                            <p-tag [value]="getElapsedTime(item.createdAt)" [severity]="getSeverity(item.createdAt)" icon="pi pi-clock"></p-tag>
                                        </div>
                                        <div class="col-fixed gap-1">
                                            <p-chip [label]="item.table?.name" icon="pi pi-table"></p-chip>
                                        </div>
                                        <div class="col">
                                            <div class="text-xl font-bold text-900">{{ item.quantity }}x {{ item.meal?.name }}</div>
                                            <div *ngIf="item.aditional" class="text-sm text-600 mt-1"><i class="pi pi-comment mr-1"></i>{{ item.aditional }}</div>
                                        </div>
                                        <div class="col-fixed gap-2 flex">
                                            <p-button *ngIf="item.statusOrderId == 1" label="Preparar" severity="warning" icon="pi pi-cog" (onClick)="changeStatusOrder($event,item,2)"></p-button>
                                            <p-button *ngIf="item.statusOrderId == 2" label="Terminar" severity="success" icon="pi pi-check" (onClick)="changeStatusOrder($event,item,3)"></p-button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </p-dataView>
                </p-tabPanel>

                <!-- HISTORY TAB -->
                <p-tabPanel header="Historial" leftIcon="pi pi-history">
                    <p-dataView #dvHistory [value]="historyItems" [rows]="10" [paginator]="true" emptyMessage="Sin historial reciente">
                        <ng-template pTemplate="list" let-items>
                            <div class="grid grid-nogutter">
                                <div class="col-12 pb-2" *ngFor="let item of items; let first = first">
                                    <div class="grid align-items-center p-2 border-bottom-1 surface-border" [ngClass]="{'border-top-1': first}">
                                        <div class="col-fixed" style="width: 100px;">
                                            <span class="text-500">{{ item.createdAt | date:'shortTime' }}</span>
                                        </div>
                                        <div class="col-fixed gap-1">
                                            <p-chip [label]="item.table?.name" icon="pi pi-table"></p-chip>
                                        </div>
                                        <div class="col">
                                            <div class="text-lg font-medium text-700">{{ item.quantity }}x {{ item.meal?.name }}</div>
                                        </div>
                                        <div class="col-fixed">
                                            <p-tag value="Completado" severity="success"></p-tag>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </p-dataView>
                </p-tabPanel>
            </p-tabView>
        </p-card>
    </div>
</div>
<p-confirmDialog #cd>
    <ng-template pTemplate="headless" let-message>
        <div class="flex flex-column align-items-center p-5 surface-overlay border-round">
            <div class="border-circle bg-primary inline-flex justify-content-center align-items-center h-6rem w-6rem">
                <i class="pi pi-question text-5xl"></i>
            </div>
            <span class="font-bold text-2xl block mb-2 mt-4">
                {{ message.header }}
            </span>
            <p class="mb-0">{{ message.message }}</p>
            <div class="flex align-items-center gap-2 mt-4">
                <button 
                    pButton 
                    label="Si" 
                    (click)="cd.accept()" 
                    class="w-8rem">
                </button>
                <button 
                    pButton 
                    label="No" 
                    (click)="cd.reject()" 
                    class="p-button-outlined w-8rem ">
                </button>
            </div>
        </div>
    </ng-template>
</p-confirmDialog>

<p-overlayPanel #op [style]="{ width: '450px' }" [showCloseIcon]="true">
    <ng-template pTemplate="content">
        <div class="font-medium text-700 mt-2">{{coments}}</div>
    </ng-template>
</p-overlayPanel>


