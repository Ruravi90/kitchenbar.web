import{d as I}from"./chunk-64WP64BE.js";import{b as ee,e as ie,f as ne,g as re,h as oe,j as le}from"./chunk-IXSFSNLD.js";import{b as se}from"./chunk-J6VSZILJ.js";import{a as K,g as Q,j as X,n as $}from"./chunk-65D7KFAQ.js";import{d as te}from"./chunk-ETYH724P.js";import{b as J,c as H}from"./chunk-BJ7UQRZ4.js";import{b as N,d as L,g as A,j as z,o as Y,r as q,t as Z}from"./chunk-MLSKFZ7F.js";import"./chunk-4YRY4IP2.js";import{e as O,l as G}from"./chunk-JY4AAIVW.js";import{$ as E,A as a,B as d,Ca as C,Da as R,N as p,O as v,W as S,Y as u,Ya as j,Za as D,ba as i,ca as n,da as f,ha as U,ia as h,ja as x,na as F,r as y,sb as B,ta as k,ua as m,v as W,va as V,w as M,wa as P,xa as g,ya as _,za as w}from"./chunk-VUSRYWWQ.js";var T=()=>({width:"100%"}),me=r=>({"border-top-1 surface-border":r});function ce(r,b){if(r&1){let t=U();i(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33),m(4),n()(),i(5,"div",34)(6,"p-button",35),h("click",function(){let e=a(t).$implicit,l=x(2);return d(l.showModal(!0,e))}),n()(),i(7,"div",34)(8,"p-button",36),h("click",function(){let e=a(t).$implicit,l=x(2);return d(l.confirmDeleted(e))}),n()()()()}if(r&2){let t=b.$implicit,o=b.first;p(),u("ngClass",R(2,me,!o)),p(3),V(t.name)}}function ue(r,b){if(r&1&&(i(0,"div",28),S(1,ce,9,4,"div",29),n()),r&2){let t=b.$implicit;p(),u("ngForOf",t)}}function he(r,b){if(r&1){let t=U();i(0,"div",37)(1,"div",38),f(2,"i",39),n(),i(3,"span",40),m(4),n(),i(5,"p",41),m(6),n(),i(7,"div",42)(8,"button",43),h("click",function(){a(t),x();let e=k(47);return d(e.accept())}),n(),i(9,"button",44),h("click",function(){a(t),x();let e=k(47);return d(e.reject())}),n()()()}if(r&2){let t=b.$implicit;p(4),P(" ",t.header," "),p(2),V(t.message)}}var de=(()=>{class r{constructor(t,o,e,l){this.confirmationService=t,this._serviceAuth=o,this._serviceBranch=e,this.usersServices=l,this.items=[],this.branches=[],this.user=new I,this.current=new I,this.visibleModal=!1,this.isEdit=!1,this.roles=[{id:1,name:"Admin"},{id:2,name:"Mesero"}]}ngOnInit(){this.getUsers(),this.getBranches(),this.current=this._serviceAuth.getCurrentUser()}getUsers(){this.usersServices.getItemsByInstance().subscribe({next:t=>{this.items=t},error:t=>console.error(t)})}getBranches(){this._serviceBranch.getItemsByInstance().subscribe({next:t=>{this.branches=t},error:t=>console.error(t)})}showModal(t=!1,o){this.selectedRol=null,this.selectedBranche=null,t?(this.user=o,this.user.user_name=o?.user_name?.split("@")[0],this.user.password="",this.selectedRol=this.roles.find(e=>e.id==o?.role),this.selectedBranche=this.branches.find(e=>e.id==o?.branchId),console.log(this.selectedRol)):this.user=new I,this.isEdit=t,this.visibleModal=!0}confirmSave(){this.user.user_name=this.user.user_name+"@"+this.current.instance.name_kitchen.toLowerCase(),this.user.role=this.selectedRol.id,this.user.branchId=this.selectedBranche.id,this.isEdit?this.usersServices.updateItem(this.user.id,this.user).subscribe({next:t=>this.getUsers(),error:t=>console.error(t)}):this.usersServices.createItem(this.user).subscribe({next:t=>this.getUsers(),error:t=>console.error(t)}),this.selectedRol=null,this.selectedBranche=null,this.visibleModal=!1}confirmDeleted(t){this.confirmationService.confirm({header:"Estas seguro de eliminar?",message:"Por favor de confirmar.",accept:()=>{this.usersServices.deleteItem(this.user.id).subscribe({next:o=>this.getUsers(),error:o=>console.error(o)})}})}static{this.\u0275fac=function(o){return new(o||r)(v(O),v(z),v(q),v(Y))}}static{this.\u0275cmp=W({type:r,selectors:[["app-tables"]],decls:49,vars:27,consts:[["dv",""],["password","ngModel"],["cd",""],[1,"flex","flex-wrap","justify-content-center"],[1,"w-full"],["header","Usuarios",1,""],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar"],["type","button","pButton","","icon","pi pi-plus","size","small","pTooltip","Nuevo usuario",1,"p-button-success",3,"click"],["emptyMessage","Usuarios no registrados",3,"value","rows","paginator"],["pTemplate","list"],[3,"visibleChange","header","modal","visible"],[1,"formgrid","grid","gap-3","mb-3","mt-3"],[1,"field","col-12"],["for","name"],["pInputText","","id","name","type","text",1,"w-full",3,"ngModelChange","ngModel"],["for","role"],["id","role","optionLabel","name","placeholder","Selecciona la sucursal",3,"ngModelChange","options","ngModel"],["id","role","optionLabel","name","placeholder","Selecciona el Rol",3,"ngModelChange","options","ngModel"],["pTooltip","usuario@nombre-bar",1,"field","col-12"],["for","user_name"],["id","user_name","type","text","pInputText","",3,"ngModelChange","ngModel"],["for","password"],["id","password","name","password",3,"ngModelChange","ngModel","inputStyle","toggleMask"],[1,"flex","justify-content-end","gap-2"],["label","Cancelar","severity","secondary",3,"click"],["label","Guardar",3,"click"],["pTemplate","headless"],[1,"grid","grid-nogutter"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"grid","p-2",3,"ngClass"],[1,"col"],[1,"overflow-hidden","text-overflow-ellipsis","text-lg","font-medium","text-900","mt-2",2,"width","100px"],[1,"col-fixed","gap-1"],["icon","pi pi-pencil","size","small","pTooltip","Editar",3,"click"],["severity","danger","icon","pi pi-trash","size","small","pTooltip","Eliminar",3,"click"],[1,"flex","flex-column","align-items-center","p-5","surface-overlay","border-round"],[1,"border-circle","bg-primary","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Si",1,"w-8rem",3,"click"],["pButton","","label","No",1,"p-button-outlined","w-8rem",3,"click"]],template:function(o,e){if(o&1){let l=U();i(0,"div",3)(1,"div",4)(2,"p-card",5)(3,"div")(4,"p-inputGroup",4)(5,"p-inputGroupAddon"),f(6,"i",6),n(),f(7,"input",7),i(8,"button",8),h("click",function(){return a(l),d(e.showModal())}),n()(),i(9,"p-dataView",9,0),S(11,ue,2,1,"ng-template",10),n()()()()(),i(12,"p-dialog",11),w("visibleChange",function(s){return a(l),_(e.visibleModal,s)||(e.visibleModal=s),d(s)}),i(13,"div",12)(14,"div",13)(15,"label",14),m(16,"Nombre del usuario"),n(),i(17,"input",15),w("ngModelChange",function(s){return a(l),_(e.user.name,s)||(e.user.name=s),d(s)}),n()(),i(18,"div",13),f(19,"p-divider"),n(),i(20,"div",13)(21,"label",16),m(22,"Sucursal"),n(),i(23,"p-dropdown",17),w("ngModelChange",function(s){return a(l),_(e.selectedBranche,s)||(e.selectedBranche=s),d(s)}),n()(),i(24,"div",13),f(25,"p-divider"),n(),i(26,"div",13)(27,"label",16),m(28,"Rol"),n(),i(29,"p-dropdown",18),w("ngModelChange",function(s){return a(l),_(e.selectedRol,s)||(e.selectedRol=s),d(s)}),n()(),i(30,"div",19)(31,"label",20),m(32,"Usuario"),n(),i(33,"p-inputGroup")(34,"input",21),w("ngModelChange",function(s){return a(l),_(e.user.user_name,s)||(e.user.user_name=s),d(s)}),n(),i(35,"p-inputGroupAddon"),m(36),n()()(),i(37,"div",13)(38,"label",22),m(39,"Contrase\xF1a"),n(),i(40,"p-password",23,1),w("ngModelChange",function(s){return a(l),_(e.user.password,s)||(e.user.password=s),d(s)}),n()()(),i(42,"div",24)(43,"p-button",25),h("click",function(){return a(l),d(e.visibleModal=!1)}),n(),i(44,"p-button",26),h("click",function(){return a(l),d(e.confirmSave())}),n()()(),f(45,"p-toast"),i(46,"p-confirmDialog",null,2),S(48,he,10,2,"ng-template",27),n()}o&2&&(p(9),u("value",e.items)("rows",5)("paginator",!0),p(3),F("header","",e.isEdit?"Editar":"Nuevo"," usuario"),u("modal",!0),g("visible",e.visibleModal),p(5),g("ngModel",e.user.name),p(6),E(C(23,T)),u("options",e.branches),g("ngModel",e.selectedBranche),p(6),E(C(24,T)),u("options",e.roles),g("ngModel",e.selectedRol),p(5),g("ngModel",e.user.user_name),p(2),V("@"+e.current.instance.name_kitchen.toLowerCase()),p(4),E(C(25,T)),g("ngModel",e.user.password),u("inputStyle",C(26,T))("toggleMask",!0))},dependencies:[j,D,J,H,G,Z,N,L,A,te,K,$,ie,ne,ee,oe,re,Q,se,X],styles:[".button-table[_ngcontent-%COMP%]{appearance:none;background-color:#fcfcfd;border-radius:4px;border-width:0;box-shadow:#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;box-sizing:border-box;color:#36395a;cursor:pointer;font-family:JetBrains Mono,monospace;height:35vh;width:30vw;list-style:none;overflow:hidden;padding-left:16px;padding-right:16px;position:relative;text-decoration:none;transition:box-shadow .15s,transform .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;will-change:box-shadow,transform;font-size:18px}.button-table[_ngcontent-%COMP%]:focus{box-shadow:#d6d6e7 0 0 0 1.5px inset,#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset}.button-table[_ngcontent-%COMP%]:hover{box-shadow:#2d234266 0 4px 8px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;transform:translateY(-2px)}.button-table[_ngcontent-%COMP%]:active{box-shadow:#d6d6e7 0 3px 7px inset;transform:translateY(2px)}"]})}}return r})();var pe=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=M({type:r})}static{this.\u0275inj=y({imports:[B.forChild([{path:"",component:de}]),B]})}}return r})();var Ae=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=M({type:r})}static{this.\u0275inj=y({imports:[pe,le]})}}return r})();export{Ae as UsersModule};
