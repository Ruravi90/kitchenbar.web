import{a as ae,b as se,c as le,d as me,e as pe,f as de}from"./chunk-E6TKTF7G.js";import{a as ne}from"./chunk-4MLLL3M2.js";import{b as re}from"./chunk-KVEXNWIA.js";import{h as ee,i as te,j as ie,k as oe}from"./chunk-737QNFMI.js";import"./chunk-MXMFQBGE.js";import{c as Z,e as O}from"./chunk-FDCLM4BU.js";import{b as X,c as Y,d as K}from"./chunk-BJ3AG4RX.js";import{b as H}from"./chunk-JSWT4IH4.js";import{i as W,k as A,l as T}from"./chunk-YKTI5QJU.js";import"./chunk-4YRY4IP2.js";import{l as $}from"./chunk-P3S5YJFO.js";import{$a as q,Fa as N,N as w,O as j,Q as D,W as I,Y as S,_a as J,a as C,b as y,e as R,ea as f,fa as h,fb as Q,ga as v,q as V,r as b,t as z,ub as E,v as P,w as M,wa as k,xa as G}from"./chunk-SBAOVUZ3.js";var u=function(e){return e[e.Up=1]="Up",e[e.Down=3]="Down",e[e.Right=6]="Right",e[e.Left=8]="Left",e[e.UpMirrored=2]="UpMirrored",e[e.DownMirrored=4]="DownMirrored",e[e.LeftMirrored=5]="LeftMirrored",e[e.RightMirrored=7]="RightMirrored",e[e.Default=0]="Default",e[e.NotJpeg=-1]="NotJpeg",e[e.NotDefined=-2]="NotDefined",e}(u||{}),xe,s=class{};xe=s;s.getOrientation=e=>new Promise((r,i)=>{try{let o=new FileReader;o.onload=()=>{let n=new DataView(o.result);if(!n.byteLength||n.getUint16(0,!1)!==65496)return r(u.NotDefined);let m=n.byteLength,t=2;for(;t<m;){let l=n.getUint16(t,!1);if(t+=2,l===65505){if(n.getUint32(t+=2,!1)!==1165519206)return r(u.NotJpeg);let d=n.getUint16(t+=6,!1)===18761;t+=n.getUint32(t+4,d);let c=n.getUint16(t,d);t+=2;for(let a=0;a<c;a++)if(n.getUint16(t+a*12,d)===274)return r(n.getUint16(t+a*12+8,d))}else{if((l&65280)!==65280)break;t+=n.getUint16(t,!1)}}return r(u.NotJpeg)},o.readAsArrayBuffer(e)}catch{return i(u.Default)}});s.uploadFile=(e,r=!0,i=!1)=>new Promise(function(o,n){let m=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(m||t).then(l=>l?s.generateUploadInputNative(window.document,r,i):s.generateUploadInputRenderer(e,r,i)).then(l=>{let d=l?Array.from(l):[],c=d.map(g=>s.getOrientation(g)),a=d.map(g=>s.fileToDataURL(g)),p=[];Promise.all(c).then(g=>(p=g,Promise.all(a))).then(g=>{let x=g.map((_,U)=>({image:_.dataUrl,orientation:p[U],fileName:_.fileName}));o(r?x:x[0])})}).catch(l=>n(l))});s.fileToDataURL=e=>new Promise((r,i)=>{let o=new FileReader;o.onload=n=>{r({dataUrl:n.target.result,fileName:e.name})};try{o.readAsDataURL(e)}catch(n){i(`ngx-image-compress - probably no file have been selected: ${n}`)}});s.generateUploadInputRenderer=(e,r=!0,i=!1)=>{let o=!1;return new Promise((n,m)=>{let t=e.createElement("input");e.setStyle(t,"display","none"),e.setProperty(t,"type","file"),e.setProperty(t,"accept","image/*"),r&&e.setProperty(t,"multiple","true"),e.listen(t,"click",l=>{l.target.value=""}),e.listen(t,"change",l=>{o=!0;let d=l.target.files;n(d)}),i&&window.addEventListener("focus",()=>{setTimeout(()=>{o||m(new Error("file upload on blur - no file selected"))},300)},{once:!0}),t.click()})};s.generateUploadInputNative=(e,r=!0,i=!1)=>{let o=!1;return new Promise((n,m)=>{let t=e.createElement("input");t.id="upload-input"+new Date,t.style.display="none",t.setAttribute("type","file"),t.setAttribute("accept","image/*"),r&&t.setAttribute("multiple","true"),e.body.appendChild(t),t.addEventListener("change",()=>{o=!0,n(t.files),e.body.removeChild(e.getElementById(t.id))},{once:!0}),i&&window.addEventListener("focus",()=>{setTimeout(()=>{!o&&e.getElementById(t.id)&&(m(new Error("file upload on blur - no file selected")),e.body.removeChild(e.getElementById(t.id)))},300)},{once:!0}),t.click()})};s.compress=(e,r,i,o=50,n=50,m=0,t=0)=>new Promise(function(l,d){n=n/100,o=o/100;let c=new Image;c.onload=()=>{let a=i.createElement("canvas"),p=a.getContext("2d");if(!p)return d("No canvas context available");let g=c.naturalWidth,x=c.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(r===u.Right||r===u.Left)){let he=g;g=x,x=he}let _=m?m/g:1,U=t?t/x:1;o=Math.min(o,_,U),a.width=g*o,a.height=x*o;let B=Math.PI/180;CSS.supports("image-orientation","from-image")||r===u.Up?p.drawImage(c,0,0,a.width,a.height):r===u.Right?(p.save(),p.rotate(90*B),p.translate(0,-a.width),p.drawImage(c,0,0,a.height,a.width),p.restore()):r===u.Left?(p.save(),p.rotate(-90*B),p.translate(-a.width,0),p.drawImage(c,0,0,a.height,a.width),p.restore()):r===u.Down?(p.save(),p.rotate(180*B),p.translate(-a.width,-a.height),p.drawImage(c,0,0,a.width,a.height),p.restore()):p.drawImage(c,0,0,a.width,a.height);let ge=e.substr(5,e.split(";")[0].length-5),fe=a.toDataURL(ge,n);l(fe)},c.onerror=a=>d(a),c.src=e});s.byteCount=e=>encodeURI(e).split(/%..|./).length-1;s.getImageMaxSize=(e,r,i,o=!1)=>R(void 0,null,function*(){let m=d=>(d/1024/1024).toFixed(2);r&&console.debug("NgxImageCompress - Opening upload window");let t=yield s.uploadFile(i,!1,o),l;for(let d=0;d<10;d++){let c=s.byteCount(t.image);l=yield s.compress(t.image,t.orientation,i,50,100);let a=s.byteCount(l);if(console.debug("NgxImageCompress -","Compression from",m(c),"MB to",m(a),"MB"),a>=c)throw d===0?(r&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",m(c),"MB large"),y(C({},t),{image:l})):(r&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",m(c),"MB large"),y(C({},t),{image:l}));if(a<e*1024*1024)return r&&console.debug("NgxImageCompress -","Here your file",m(a),"MB large"),y(C({},t),{image:l});if(d===9)throw r&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",m(c),"MB large"),y(C({},t),{image:l});r&&console.debug("NgxImageCompress -","Reached",m(a),"MB large. Trying another time after",d+1,"times"),t.image=l}throw r&&console.debug("NgxImageCompress - Unexpected error"),{}});var F=(()=>{class e{constructor(i){this.DOC_ORIENTATION=u,this.render=i.createRenderer(null,null)}byteCount(i){return s.byteCount(i)}getOrientation(i){return s.getOrientation(i)}uploadFile(){return s.uploadFile(this.render,!1)}uploadMultipleFiles(){return s.uploadFile(this.render,!0)}uploadFileOrReject(){return s.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return s.uploadFile(this.render,!0,!0)}compressFile(i,o,n=50,m=50,t=0,l=0){return s.compress(i,o,this.render,n,m,t,l)}uploadAndGetImageWithMaxSize(i=1,o=!1,n=!1){return s.getImageMaxSize(i,o,this.render,n).then(m=>m.image).catch(m=>{throw m.image})}uploadAndGetImageWithMaxSizeAndMetas(i=1,o=!1,n=!1){return s.getImageMaxSize(i,o,this.render,n)}}return e.\u0275fac=function(i){return new(i||e)(z(D))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ve=e=>({"border-top-1 surface-border":e});function Ce(e,r){e&1&&v(0,"img",9)}function ye(e,r){if(e&1&&(f(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div")(5,"div",16),k(6),h()()(),f(7,"div",17)(8,"div",18),v(9,"p-button",19)(10,"p-button",20),h()()()()()),e&2){let i=r.$implicit,o=r.first;w(),S("ngClass",N(2,ve,!o)),w(5),G(i.name)}}function be(e,r){if(e&1&&(f(0,"div",10),I(1,ye,11,4,"div",11),h()),e&2){let i=r.$implicit;w(),S("ngForOf",i)}}var ce=(()=>{class e{constructor(i,o){this.categoriesServices=i,this.imageCompress=o,this.imgResultBeforeCompression="",this.imgResultAfterCompression=""}ngOnInit(){this.getCategories()}getCategories(){this.categoriesServices.getItemsByInstance().subscribe({next:i=>{this.categories=i},error:i=>console.error(i)})}compressFile(){this.imageCompress.uploadFile().then(({image:i,orientation:o})=>{this.imgResultBeforeCompression=i,console.log("Size in bytes of the uploaded image was:",this.imageCompress.byteCount(i)),this.imageCompress.compressFile(i,o,50,50).then(n=>{this.imgResultAfterCompression=n,console.log("Size in bytes after compression is now:",this.imageCompress.byteCount(n))})})}static{this.\u0275fac=function(o){return new(o||e)(j(H),j(F))}}static{this.\u0275cmp=P({type:e,selectors:[["app-categories"]],decls:12,vars:3,consts:[["dv",""],["header","Categorias",1,""],["pTemplate","header"],[1,"w-full"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar/agregar"],["type","button","pButton","","icon","pi pi-plus",1,"p-button-success"],["emptyMessage","Sin categorias registradas",3,"value","rows","paginator"],["pTemplate","list"],["alt","Card","src","../../../../assets/layout/images/restaurante.webp",2,"max-height","15vh","object-fit","cover"],[1,"grid","grid-nogutter"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"flex","flex-column","sm:flex-row","sm:align-items-center","p-4","gap-3",3,"ngClass"],[1,"flex","flex-column","md:flex-row","justify-content-between","md:align-items-center","flex-1","gap-4"],[1,"flex","flex-row","md:flex-column","justify-content-between","align-items-start","gap-2"],[1,"text-lg","font-medium","text-900","mt-2"],[1,"flex","flex-column","md:align-items-end","gap-5"],[1,"flex","md:flex-row","gap-2"],["icon","pi pi-pencil",1,"flex-auto","md:flex-initial","white-space-nowrap"],["severity","danger","icon","pi pi-trash",1,"flex-auto","md:flex-initial","white-space-nowrap"]],template:function(o,n){o&1&&(f(0,"p-card",1),I(1,Ce,1,0,"ng-template",2),f(2,"div")(3,"p-inputGroup",3)(4,"p-inputGroupAddon"),v(5,"i",4),h(),v(6,"input",5),f(7,"button",6),k(8,"Agregar"),h()(),f(9,"p-dataView",7,0),I(11,be,2,1,"ng-template",8),h()()()),o&2&&(w(9),S("value",n.categories)("rows",5)("paginator",!0))},dependencies:[J,q,X,Y,$,A,ie,ee,le,pe],styles:[".button-table[_ngcontent-%COMP%]{appearance:none;background-color:#fcfcfd;border-radius:4px;border-width:0;box-shadow:#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;box-sizing:border-box;color:#36395a;cursor:pointer;font-family:JetBrains Mono,monospace;height:35vh;width:30vw;list-style:none;overflow:hidden;padding-left:16px;padding-right:16px;position:relative;text-decoration:none;transition:box-shadow .15s,transform .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;will-change:box-shadow,transform;font-size:18px}.button-table[_ngcontent-%COMP%]:focus{box-shadow:#d6d6e7 0 0 0 1.5px inset,#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset}.button-table[_ngcontent-%COMP%]:hover{box-shadow:#2d234266 0 4px 8px,#2d23424d 0 7px 13px -3px,#d6d6e7 0 -3px inset;transform:translateY(-2px)}.button-table[_ngcontent-%COMP%]:active{box-shadow:#d6d6e7 0 3px 7px inset;transform:translateY(2px)}"]})}}return e})();var ue=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=M({type:e})}static{this.\u0275inj=b({imports:[E.forChild([{path:"",component:ce}]),E]})}}return e})();var dt=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=M({type:e})}static{this.\u0275inj=b({providers:[F],imports:[Q,ue,K,Z,T,W,O,oe,ne,ae,se,re,te,me,de]})}}return e})();export{dt as CategoriesModule};
