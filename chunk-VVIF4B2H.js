import{a as z}from"./chunk-UUS4ZWI4.js";import{g as U,h as G,k as K,n as X}from"./chunk-QKYNGRZ6.js";import"./chunk-X52ZXH5X.js";import{a as Y,g as Z,o as J}from"./chunk-AJV43YAS.js";import{b as $,c as H}from"./chunk-4QSKJXB4.js";import{u as A,w as W}from"./chunk-HN6FBLWS.js";import"./chunk-4YRY4IP2.js";import{g as _,l as V}from"./chunk-MABZNZAS.js";import{$a as O,Aa as L,Ba as E,C as f,D as g,Da as Q,Ea as F,P as a,Q as b,Y as m,_ as r,_a as N,aa as I,ab as P,ca as o,da as s,ea as p,g as k,ia as x,ja as T,ka as h,na as w,oa as C,t as c,tb as j,va as v,vb as M,wa as D,x as q,xa as S,y as u,ya as R,za as B}from"./chunk-OVWECSA7.js";var oe=()=>({width:"100%"}),ne=t=>({"border-top-1 surface-border":t});function re(t,l){t&1&&p(0,"i",28)}function se(t,l){t&1&&p(0,"i",29)}function le(t,l){if(t&1&&p(0,"button",30),t&2){let e=h().$implicit;w("pTooltip",e.isRequestAttendace?"Necesita asistencia":""),r("rounded",!0)("text",!e.isRequestAttendace)("raised",!0)}}function pe(t,l){if(t&1&&p(0,"button",31),t&2){let e=h().$implicit;w("pTooltip",e.isRequestCheck?"Solicito la cuenta":""),r("rounded",!0)("text",!e.isRequestCheck)("raised",!0)}}function me(t,l){if(t&1){let e=x();o(0,"div",16)(1,"div",17)(2,"div",18),m(3,re,1,0,"i",19)(4,se,1,0,"i",20),s(),o(5,"div",21)(6,"div",22),v(7),s()(),o(8,"div",23),m(9,le,1,4,"button",24),s(),o(10,"div",23),m(11,pe,1,4,"button",25),s(),o(12,"div",23)(13,"p-button",26),T("onClick",function(){let i=f(e).$implicit,d=h(2);return g(d.showQRModal(i))}),s()(),o(14,"div",23),p(15,"p-button",27),s()()()}if(t&2){let e=l.$implicit,n=l.first;a(),r("ngClass",F(14,ne,!n)),a(2),r("ngIf",!e.isBusy),a(),r("ngIf",e.isBusy),a(3),D(e.name),a(2),r("ngIf",e.isBusy),a(2),r("ngIf",e.isBusy),a(2),r("rounded",!0)("text",!0)("raised",!0),a(2),C("routerLink","/kitchen/table/",e.identity,""),r("rounded",!0)("text",!0)("raised",!0)}}function de(t,l){if(t&1&&(o(0,"div",14),m(1,me,16,16,"div",15),s()),t&2){let e=l.$implicit;a(),r("ngForOf",e)}}function ce(t,l){if(t&1&&(o(0,"section",32),p(1,"i",33),o(2,"div",34)(3,"p",35),v(4),s(),o(5,"p",36),v(6),s()()()),t&2){let e=l.$implicit;a(4),S(" ",e.summary," "),a(2),S(" ",e.detail," ")}}var te=(()=>{class t{constructor(e,n,i){this.messageService=e,this.tableServices=n,this.hub=i,this.isBusyTableService=!1,this.visibleQRModal=!1,this.qrData={allowEmptyString:!0,alt:"A custom alt attribute",ariaLabel:"QR Code image with the following content...",colorDark:"#000000ff",colorLight:"#ffffffff",cssClass:"center",elementType:"canvas",errorCorrectionLevel:"M",imageSrc:"./assets/layout/images/logo-dark.svg",imageHeight:75,imageWidth:150,margin:4,qrdata:"",scale:1,version:void 0,title:"A custom title attribute",width:300},this.elementType="canvas"}ngOnInit(){this.retrieveTables(),this.hub.notificationWarnTables().subscribe(e=>{e.isRequestAttendace&&this.messageService.add({summary:"Asistencia",detail:`La ${e.name} necesita ayuda`,life:3e3}),e.isRequestCheck&&this.messageService.add({summary:"Cuenta",detail:`La ${e.name} solicito la cuenta`,life:3e3}),this.retrieveTables()}),this.hub.notificationDangerTables().subscribe(e=>{console.log("notificationWarnAttendace",e),this.messageService.add({summary:"Asistencia",detail:"Se solicito asistencia",life:3e3}),this.retrieveTables()})}delay(e){return k(this,null,function*(){return new Promise(n=>setTimeout(n,e))})}retrieveTables(){this.isBusyTableService||(this.isBusyTableService=!0,this.tableServices.getItemsByInstance().subscribe({next:e=>{this.isBusyTableService=!1,this.tables=e},error:e=>{this.messageService.add({severity:"warn",summary:"Alerta",detail:e.error.messages}),this.isBusyTableService=!1}}))}showQRModal(e){this.visibleQRModal=!0,this.table=e,this.qrData.qrdata=z.baseUrl+e.identity}static{this.\u0275fac=function(n){return new(n||t)(b(_),b(A),b(W))}}static{this.\u0275cmp=q({type:t,selectors:[["app-tables"]],features:[E([_])],decls:14,vars:25,consts:[["dv",""],["parent",""],[1,"flex","flex-wrap","justify-content-center"],[1,"w-full"],["header","Mesas",1,"shadow-7"],["emptyMessage","Sin mesas registradas",3,"value"],["pTemplate","list"],[3,"visibleChange","header","modal","visible"],[1,"formgrid","grid","gap-3","mb-3","mt-3"],[3,"elementType","errorCorrectionLevel","qrdata","scale","width","allowEmptyString","className","colorDark","colorLight","margin","alt","ariaLabel","title","imageSrc","imageHeight","imageWidth"],[1,"flex","justify-content-end","gap-2"],["label","Cerrar","severity","secondary",3,"click"],["position","top-center",3,"baseZIndex"],["pTemplate","headless"],[1,"grid","grid-nogutter"],["class","col-12 m-1",4,"ngFor","ngForOf"],[1,"col-12","m-1"],[1,"grid",3,"ngClass"],[1,"col-fixed"],["class","pi pi-bookmark mt-2","style","font-size: 1.5rem","pTooltip","Mesa disponible",4,"ngIf"],["class","pi pi-bookmark-fill mt-2","style","font-size: 1.5rem","pTooltip","Mesa ocupada",4,"ngIf"],[1,"col"],[1,"font-medium","text-700","mt-2"],[1,"col-fixed","gap-1"],["pButton","","icon","pi pi-flag-fill","class","p-button-info",3,"rounded","text","raised","pTooltip",4,"ngIf"],["pButton","","icon","pi pi-dollar","class","p-button-warning",3,"rounded","text","raised","pTooltip",4,"ngIf"],["icon","pi pi-qrcode","severity","secondary",3,"onClick","rounded","text","raised"],["icon","pi pi-sign-in","pTooltip","Ir",3,"routerLink","rounded","text","raised"],["pTooltip","Mesa disponible",1,"pi","pi-bookmark","mt-2",2,"font-size","1.5rem"],["pTooltip","Mesa ocupada",1,"pi","pi-bookmark-fill","mt-2",2,"font-size","1.5rem"],["pButton","","icon","pi pi-flag-fill",1,"p-button-info",3,"rounded","text","raised","pTooltip"],["pButton","","icon","pi pi-dollar",1,"p-button-warning",3,"rounded","text","raised","pTooltip"],[1,"flex","p-3","gap-3","w-full","bg-black-alpha-90","shadow-2",2,"border-radius","10px"],[1,"pi","pi-info","text-primary-300","text-2xl"],[1,"flex","flex-column","gap-3","w-full"],[1,"m-0","font-semibold","text-base","text-white"],[1,"m-0","text-base","text-400"]],template:function(n,i){if(n&1){let d=x();o(0,"div",2)(1,"div",3)(2,"p-card",4)(3,"p-dataView",5,0),m(5,de,2,1,"ng-template",6),s()()()(),o(6,"p-dialog",7),L("visibleChange",function(y){return f(d),B(i.visibleQRModal,y)||(i.visibleQRModal=y),g(y)}),o(7,"div",8),p(8,"qrcode",9,1),s(),o(10,"div",10)(11,"p-button",11),T("click",function(){return f(d),g(i.visibleQRModal=!1)}),s()()(),o(12,"p-toast",12),m(13,ce,7,2,"ng-template",13),s()}n&2&&(a(2),I(Q(24,oe)),a(),r("value",i.tables),a(3),C("header","QR de mesa ",i.table==null?null:i.table.name,""),r("modal",!0),R("visible",i.visibleQRModal),a(2),r("elementType",i.elementType)("errorCorrectionLevel",i.qrData.errorCorrectionLevel)("qrdata",i.qrData.qrdata)("scale",i.qrData.scale)("width",i.qrData.width)("allowEmptyString",!0)("className",i.qrData.cssClass)("colorDark",i.qrData.colorDark)("colorLight",i.qrData.colorLight)("margin",i.qrData.margin)("alt",i.qrData.alt)("ariaLabel",i.qrData.ariaLabel)("title",i.qrData.title)("imageSrc",i.qrData.imageSrc)("imageHeight",i.qrData.imageHeight)("imageWidth",i.qrData.imageWidth),a(4),r("baseZIndex",5e3))},dependencies:[j,N,O,P,$,H,V,Y,J,G,U,Z,K],styles:[".button-table[_ngcontent-%COMP%]{appearance:none;background-color:var(--primary-color);border-radius:4px;border-width:0;box-shadow:#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,var(--highlight-text-color) 0 -3px 0 inset;box-sizing:border-box;color:#36395a;cursor:pointer;font-family:JetBrains Mono,monospace;list-style:none;overflow:hidden;padding-left:16px;padding-right:16px;position:relative;text-decoration:none;transition:box-shadow .15s,transform .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;will-change:box-shadow,transform;font-size:18px}.button-table[_ngcontent-%COMP%]:focus{box-shadow:#d6d6e7 0 0 0 1.5px inset,#2d234266 0 2px 4px,#2d23424d 0 7px 13px -3px,var(--highlight-text-color) 0 -3px 0 inset}.button-table[_ngcontent-%COMP%]:hover{box-shadow:#2d234266 0 4px 8px,#2d23424d 0 7px 13px -3px,var(--highlight-text-color) 0 -3px 0 inset;transform:translateY(-2px)}.button-table[_ngcontent-%COMP%]:active{box-shadow:#d6d6e7 0 3px 7px inset;transform:translateY(2px)}@media (hover: hover) and (pointer: fine){.button-table[_ngcontent-%COMP%]{height:20vi;width:35vi}}@media (hover: none) and (pointer: coarse){.button-table[_ngcontent-%COMP%]{height:25vi;width:41vi}}"]})}}return t})();var ie=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=u({type:t})}static{this.\u0275inj=c({imports:[M.forChild([{path:"",component:te}]),M]})}}return t})();var Qe=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=u({type:t})}static{this.\u0275inj=c({imports:[ie,X]})}}return t})();export{Qe as TablesModule};
